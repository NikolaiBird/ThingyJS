<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon" href="#">

    <title>ThingyJS</title>
 

<script>
/* Zepto v1.1.4 - zepto event ajax form ie - zeptojs.com/license */
var Zepto=function(){function L(t){return null==t?String(t):j[S.call(t)]||"object"}function Z(t){return"function"==L(t)}function $(t){return null!=t&&t==t.window}function _(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return"object"==L(t)}function R(t){return D(t)&&!$(t)&&Object.getPrototypeOf(t)==Object.prototype}function M(t){return"number"==typeof t.length}function k(t){return s.call(t,function(t){return null!=t})}function z(t){return t.length>0?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function H(t,e){return"number"!=typeof e||c[F(t)]?e:e+"px"}function I(t){var e,n;return u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),u[t]=n),u[t]}function V(t){return"children"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function B(n,i,r){for(e in i)r&&(R(i[e])||A(i[e]))?(R(i[e])&&!R(n[e])&&(n[e]={}),A(i[e])&&!A(n[e])&&(n[e]=[]),B(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function U(t,e){return null==e?n(t):n(t).filter(e)}function J(t,e,n,i){return Z(e)?e.call(t,n,i):e}function X(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var i=e.className,r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function Y(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?n.parseJSON(t):t:e):t}catch(i){return t}}function G(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)G(t.childNodes[n],e)}var t,e,n,i,C,N,r=[],o=r.slice,s=r.filter,a=window.document,u={},f={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],v=["after","prepend","before","append"],y=a.createElement("table"),x=a.createElement("tr"),b={tr:a.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:x,th:x,"*":a.createElement("div")},w=/complete|loaded|interactive/,E=/^[\w-]*$/,j={},S=j.toString,T={},O=a.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},A=Array.isArray||function(t){return t instanceof Array};return T.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=O).appendChild(t),i=~T.qsa(r,e).indexOf(t),o&&O.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},T.fragment=function(e,i,r){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,"<$1></$2>")),i===t&&(i=l.test(e)&&RegExp.$1),i in b||(i="*"),f=b[i],f.innerHTML=""+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),R(r)&&(u=n(s),n.each(r,function(t,e){g.indexOf(t)>-1?u[t](e):u.attr(t,e)})),s},T.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||"",t},T.isZ=function(t){return t instanceof T.Z},T.init=function(e,i){var r;if(!e)return T.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&l.test(e))r=T.fragment(e,RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=T.qsa(a,e)}else{if(Z(e))return n(a).ready(e);if(T.isZ(e))return e;if(A(e))r=k(e);else if(D(e))r=[e],e=null;else if(l.test(e))r=T.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=T.qsa(a,e)}}return T.Z(r,e)},n=function(t,e){return T.init(t,e)},n.extend=function(t){var e,n=o.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){B(t,n,e)}),t},T.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],s=i||r?e.slice(1):e,a=E.test(s);return _(t)&&a&&i?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=a.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},n.type=L,n.isFunction=Z,n.isWindow=$,n.isArray=A,n.isPlainObject=R,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.inArray=function(t,e,n){return r.indexOf.call(e,t,n)},n.camelCase=C,n.trim=function(t){return null==t?"":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var n,r,o,i=[];if(M(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else for(o in t)n=e(t[o],o),null!=n&&i.push(n);return z(i)},n.each=function(t,e){var n,i;if(M(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},n.grep=function(t,e){return s.call(t,e)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){j["[object "+e+"]"]=e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readyState)&&a.body?t(n):a.addEventListener("DOMContentLoaded",function(){t(n)},!1),this},get:function(e){return e===t?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return T.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return this.length>0&&T.matches(this[0],t)},not:function(e){var i=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r="string"==typeof e?this.filter(e):M(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return D(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!D(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!D(t)?t:n(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?n(t).filter(function(){var t=this;return r.some.call(i,function(e){return n.contains(e,t)})}):1==this.length?n(T.qsa(this[0],t)):this.map(function(){return T.qsa(this,t)}):[]},closest:function(t,e){var i=this[0],r=!1;for("object"==typeof t&&(r=n(t));i&&!(r?r.indexOf(i)>=0:T.matches(i,t));)i=i!==e&&!_(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,function(t){return(t=t.parentNode)&&!_(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return U(e,t)},parent:function(t){return U(N(this.pluck("parentNode")),t)},children:function(t){return U(this.map(function(){return V(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return U(this.map(function(t,e){return s.call(V(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=I(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=Z(t);if(this[0]&&!e)var i=n(t).get(0),r=i.parentNode||this.length>1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?"none"==i.css("display"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=J(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each(function(t){if(1===this.nodeType)if(D(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))}):this.length&&1===this[0].nodeType?!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:t},removeAttr:function(t){return this.each(function(){1===this.nodeType&&X(this,t)})},prop:function(t,e){return t=P[t]||t,1 in arguments?this.each(function(n){this[t]=J(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(e,n){var i="data-"+e.replace(m,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?Y(r):t},val:function(t){return 0 in arguments?this.each(function(e){this.value=J(this,t,e,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r=this[0],o=getComputedStyle(r,"");if(!r)return;if("string"==typeof t)return r.style[C(t)]||o.getPropertyValue(t);if(A(t)){var s={};return n.each(A(t)?t:[t],function(t,e){s[e]=r.style[C(e)]||o.getPropertyValue(e)}),s}}var a="";if("string"==L(t))i||0===i?a=F(t)+":"+H(t,i):this.each(function(){this.style.removeProperty(F(t))});else for(e in t)t[e]||0===t[e]?a+=F(e)+":"+H(e,t[e])+";":this.each(function(){this.style.removeProperty(F(e))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?r.some.call(this,function(t){return this.test(W(t))},q(t)):!1},addClass:function(t){return t?this.each(function(e){i=[];var r=W(this),o=J(this,t,e,r);o.split(/\s+/g).forEach(function(t){n(this).hasClass(t)||i.push(t)},this),i.length&&W(this,r+(r?" ":"")+i.join(" "))}):this},removeClass:function(e){return this.each(function(n){return e===t?W(this,""):(i=W(this),J(this,e,n,i).split(/\s+/g).forEach(function(t){i=i.replace(q(t)," ")}),void W(this,i.trim()))})},toggleClass:function(e,i){return e?this.each(function(r){var o=n(this),s=J(this,e,r,W(this));s.split(/\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n="scrollTop"in this[0];return e===t?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n="scrollLeft"in this[0];return e===t?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(n(t).css("margin-top"))||0,i.left-=parseFloat(n(t).css("margin-left"))||0,r.top+=parseFloat(n(e[0]).css("border-top-width"))||0,r.left+=parseFloat(n(e[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||a.body;t&&!d.test(t.nodeName)&&"static"==n(t).css("position");)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(e){var i=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(r){var o,s=this[0];return r===t?$(s)?s["inner"+i]:_(s)?s.documentElement["scroll"+i]:(o=this.offset())&&o[e]:this.each(function(t){s=n(this),s.css(e,J(this,r,t,s[e]()))})}}),v.forEach(function(t,e){var i=e%2;n.fn[t]=function(){var t,o,r=n.map(arguments,function(e){return t=L(e),"object"==t||"array"==t||null==e?e:T.fragment(e)}),s=this.length>1;return r.length<1?this:this.each(function(t,u){o=i?u:u.parentNode,u=0==e?u.nextSibling:1==e?u.firstChild:2==e?u:null;var f=n.contains(a.documentElement,o);r.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!o)return n(t).remove();o.insertBefore(t,u),f&&G(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+"To":"insert"+(e?"Before":"After")]=function(e){return n(e)[t](this),this}}),T.Z.prototype=n.fn,T.uniq=N,T.deserializeValue=Y,n.zepto=T,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function l(t){return t._zid||(t._zid=e++)}function h(t,e,n,i){if(e=p(e),e.ns)var r=d(e.ns);return(s[l(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&l(t.fn)!==l(n)||i&&t.sel!=i)})}function p(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function d(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,i,r,o,a,u,f){var h=l(e),d=s[h]||(s[h]=[]);i.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(r);var s=p(i);s.fn=r,s.sel=a,s.e in c&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=u;var l=u||r;s.proxy=function(t){if(t=j(t),!t.isImmediatePropagationStopped()){t.data=o;var i=l.apply(e,t._args==n?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},s.i=d.length,d.push(s),"addEventListener"in e&&e.addEventListener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,i,r){var o=l(t);(e||"").split(/\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete s[o][e.i],"removeEventListener"in t&&t.removeEventListener(g(e.e),e.proxy,m(e,r))})})}function j(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(E,function(t,n){var r=i[t];e[t]=function(){return this[n]=x,r&&r.apply(i,arguments)},e[n]=b}),(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function S(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===n||(i[e]=t[e]);return j(i,t)}var n,e=1,i=Array.prototype.slice,r=t.isFunction,o=function(t){return"string"==typeof t},s={},a={},u="onfocusin"in window,f={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",t.event={add:v,remove:y},t.proxy=function(e,n){var s=2 in arguments&&i.call(arguments,2);if(r(e)){var a=function(){return e.apply(n,s?s.concat(i.call(arguments)):arguments)};return a._zid=l(e),a}if(o(n))return s?(s.unshift(e[n],e),t.proxy.apply(null,s)):t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,s,a,u,f){var c,l,h=this;return e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||r(u)||u===!1||(u=a,a=s,s=n),(r(a)||a===!1)&&(u=a,a=n),u===!1&&(u=b),h.each(function(n,r){f&&(c=function(t){return y(r,t.type,u),u.apply(this,arguments)}),s&&(l=function(e){var n,o=t(e.target).closest(s,r).get(0);return o&&o!==r?(n=t.extend(S(e),{currentTarget:o,liveFired:r}),(c||u).apply(o,[n].concat(i.call(arguments,1)))):void 0}),v(r,e,u,a,s,l||c)}))},t.fn.off=function(e,i,s){var a=this;return e&&!o(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(o(i)||r(s)||s===!1||(s=i,i=n),s===!1&&(s=b),a.each(function(){y(this,e,s,i)}))},t.fn.trigger=function(e,n){return e=o(e)||t.isPlainObject(e)?t.Event(e):j(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var i,r;return this.each(function(s,a){i=S(o(e)?t.Event(e):e),i._args=n,i.target=a,t.each(h(a,e.type||e),function(t,e){return r=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){o(t)||(e=t,t=e.type);var n=document.createEvent(a[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),j(n)}}(Zepto),function(t){function l(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function h(t,e,i,r){return t.global?l(e||n,i,r):void 0}function p(e){e.global&&0===t.active++&&h(e,null,"ajaxStart")}function d(e){e.global&&!--t.active&&h(e,null,"ajaxStop")}function m(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||h(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void h(e,n,"ajaxSend",[t,e])}function g(t,e,n,i){var r=n.context,o="success";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),h(n,r,"ajaxSuccess",[e,n,t]),y(o,e,n)}function v(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),h(i,o,"ajaxError",[n,i,t||e]),y(e,n,i)}function y(t,e,n){var i=n.context;n.complete.call(i,e,t),h(n,i,"ajaxComplete",[e,n]),d(n)}function x(){}function b(t){return t&&(t=t.split(";",2)[0]),t&&(t==f?"html":t==u?"json":s.test(t)?"script":a.test(t)&&"xml")||"text"}function w(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function E(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void 0)}function j(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function T(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+"["+(a||"object"==o||"array"==o?n:"")+"]"),!r&&s?e.add(u.name,u.value):"array"==o||!i&&"object"==o?T(e,u,i,n):e.add(n,u)})}var i,r,e=0,n=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,u="application/json",f="text/html",c=/^\s*$/;t.active=0,t.ajaxJSONP=function(i,r){if(!("type"in i))return t.ajax(i);var f,h,o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||"jsonp"+ ++e,a=n.createElement("script"),u=window[s],c=function(e){t(a).triggerHandler("error",e||"abort")},l={abort:c};return r&&r.promise(l),t(a).on("load error",function(e,n){clearTimeout(h),t(a).off().remove(),"error"!=e.type&&f?g(f[0],l,i,r):v(null,n||"error",l,i,r),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),m(l,i)===!1?(c("abort"),l):(window[s]=function(){f=arguments},a.src=i.url.replace(/\?(.+)=\?/,"?$1="+s),n.head.appendChild(a),i.timeout>0&&(h=setTimeout(function(){c("timeout")},i.timeout)),l)},t.ajaxSettings={type:"GET",beforeSend:x,success:x,error:x,complete:x,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:f,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),o=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===n[i]&&(n[i]=t.ajaxSettings[i]);p(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),E(n);var s=n.dataType,a=/\?.+=\?/.test(n.url);if(a&&(s="jsonp"),n.cache!==!1&&(e&&e.cache===!0||"script"!=s&&"jsonp"!=s)||(n.url=w(n.url,"_="+Date.now())),"jsonp"==s)return a||(n.url=w(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,o);var j,u=n.accepts[s],f={},l=function(t,e){f[t.toLowerCase()]=[t,e]},h=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,d=n.xhr(),y=d.setRequestHeader;if(o&&o.promise(d),n.crossDomain||l("X-Requested-With","XMLHttpRequest"),l("Accept",u||"*/*"),(u=n.mimeType||u)&&(u.indexOf(",")>-1&&(u=u.split(",",2)[0]),d.overrideMimeType&&d.overrideMimeType(u)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&l("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(r in n.headers)l(r,n.headers[r]);if(d.setRequestHeader=l,d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=x,clearTimeout(j);var e,i=!1;if(d.status>=200&&d.status<300||304==d.status||0==d.status&&"file:"==h){s=s||b(n.mimeType||d.getResponseHeader("content-type")),e=d.responseText;try{"script"==s?(1,eval)(e):"xml"==s?e=d.responseXML:"json"==s&&(e=c.test(e)?null:t.parseJSON(e))}catch(r){i=r}i?v(i,"parsererror",d,n,o):g(e,d,n,o)}else v(d.statusText||null,d.status?"error":"abort",d,n,o)}},m(d,n)===!1)return d.abort(),v(null,"abort",d,n,o),d;if(n.xhrFields)for(r in n.xhrFields)d[r]=n.xhrFields[r];var S="async"in n?n.async:!0;d.open(n.type,n.url,S,n.username,n.password);for(r in f)y.apply(d,f[r]);return n.timeout>0&&(j=setTimeout(function(){d.onreadystatechange=x,d.abort(),v(null,"timeout",d,n,o)},n.timeout)),d.send(n.data?n.data:null),d},t.get=function(){return t.ajax(j.apply(null,arguments))},t.post=function(){var e=j.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=j.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var a,r=this,s=e.split(/\s/),u=j(e,n,i),f=u.success;return s.length>1&&(u.url=s[0],a=s[1]),u.success=function(e){r.html(a?t("<div>").html(e.replace(o,"")).find(a):e),f&&f.apply(r,arguments)},t.ajax(u),this};var S=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(S(t)+"="+S(e))},T(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var n,e=[];return t([].slice.call(this.get(0).elements)).each(function(){n=t(this);var i=n.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&e.push({name:n.attr("name"),value:n.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);
</script>


<script>
/*  handlebars v1.3.0 Copyright (C) 2011 by Yehuda Katz. | Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THEAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. */
var Handlebars=function(){var e=function(){"use strict";function t(e){this.string=e}var e;t.prototype.toString=function(){return""+this.string};e=t;return e}();var t=function(e){"use strict";function o(e){return r[e]||"&"}function u(e,t){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){e[n]=t[n]}}}function c(e){if(e instanceof n){return e.toString()}else if(!e&&e!==0){return""}e=""+e;if(!s.test(e)){return e}return e.replace(i,o)}function h(e){if(!e&&e!==0){return true}else if(l(e)&&e.length===0){return true}else{return false}}var t={};var n=e;var r={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var i=/[&<>"'`]/g;var s=/[&<>"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e==="function"};if(f(/x/)){f=function(e){return typeof e==="function"&&a.call(e)==="[object Function]"}}var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e==="object"?a.call(e)==="[object Array]":false};t.isArray=l;t.escapeExpression=c;t.isEmpty=h;return t}(e);var n=function(){"use strict";function n(e,n){var r;if(n&&n.firstLine){r=n.firstLine;e+=" - "+r+":"+n.firstColumn}var i=Error.prototype.constructor.call(this,e);for(var s=0;s<t.length;s++){this[t[s]]=i[t[s]]}if(r){this.lineNumber=r;this.column=n.firstColumn}}var e;var t=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error;e=n;return e}();var r=function(e,t){"use strict";function h(e,t){this.helpers=e||{};this.partials=t||{};p(this)}function p(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2){return undefined}else{throw new i("Missing helper: '"+e+"'")}});e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;if(f(t)){t=t.call(this)}if(t===true){return i(this)}else if(t===false||t==null){return r(this)}else if(a(t)){if(t.length>0){return e.helpers.each(t,n)}else{return r(this)}}else{return i(t)}});e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse;var i=0,s="",o;if(f(e)){e=e.call(this)}if(t.data){o=m(t.data)}if(e&&typeof e==="object"){if(a(e)){for(var u=e.length;i<u;i++){if(o){o.index=i;o.first=i===0;o.last=i===e.length-1}s=s+n(e[i],{data:o})}}else{for(var l in e){if(e.hasOwnProperty(l)){if(o){o.key=l;o.index=i;o.first=i===0}s=s+n(e[l],{data:o});i++}}}}if(i===0){s=r(this)}return s});e.registerHelper("if",function(e,t){if(f(e)){e=e.call(this)}if(!t.hash.includeZero&&!e||r.isEmpty(e)){return t.inverse(this)}else{return t.fn(this)}});e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})});e.registerHelper("with",function(e,t){if(f(e)){e=e.call(this)}if(!r.isEmpty(e))return t.fn(e)});e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}function v(e,t){d.log(e,t)}var n={};var r=e;var i=t;var s="1.3.0";n.VERSION=s;var o=4;n.COMPILER_REVISION=o;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h;h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t,n){if(l.call(e)===c){if(n||t){throw new i("Arg not supported with multiple helpers")}r.extend(this.helpers,e)}else{if(n){t.not=n}this.helpers[e]=t}},registerPartial:function(e,t){if(l.call(e)===c){r.extend(this.partials,e)}else{this.partials[e]=t}}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];if(typeof console!=="undefined"&&console[n]){console[n].call(console,t)}}}};n.logger=d;n.log=v;var m=function(e){var t={};r.extend(t,e);return t};n.createFrame=m;return n}(t,n);var i=function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=o;if(t!==n){if(t<n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}else{throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+e[1]+").")}}}function f(e,t){if(!t){throw new s("No environment passed to template")}var n=function(e,n,r,i,o,u){var a=t.VM.invokePartial.apply(this,arguments);if(a!=null){return a}if(t.compile){var f={helpers:i,partials:o,data:u};o[n]=t.compile(e,{data:u!==undefined},t);return o[n](r,f)}else{throw new s("The partial "+n+" could not be compiled when running in runtime-only mode")}};var r={escapeExpression:i.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];if(n){r=c(e,t,n)}else if(!r){r=this.programs[e]=c(e,t)}return r},merge:function(e,t){var n=e||t;if(e&&t&&e!==t){n={};i.extend(n,t);i.extend(n,e)}return n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var s=i.partial?i:t,o,u;if(!i.partial){o=i.helpers;u=i.partials}var a=e.call(r,s,n,o,u,i.data);if(!i.partial){t.VM.checkRevision(r.compilerInfo)}return a}}function l(e,t,n){var r=Array.prototype.slice.call(arguments,3);var i=function(e,i){i=i||{};return t.apply(this,[e,i.data||n].concat(r))};i.program=e;i.depth=r.length;return i}function c(e,t,n){var r=function(e,r){r=r||{};return t(e,r.data||n)};r.program=e;r.depth=0;return r}function h(e,t,n,r,i,o){var u={partial:true,helpers:r,partials:i,data:o};if(e===undefined){throw new s("The partial "+t+" could not be found")}else if(e instanceof Function){return e(n,u)}}function p(){return""}var r={};var i=e;var s=t;var o=n.COMPILER_REVISION;var u=n.REVISION_CHANGES;r.checkRevision=a;r.template=f;r.programWithDepth=l;r.program=c;r.invokePartial=h;r.noop=p;return r}(t,n,r);var s=function(e,t,n,r,i){"use strict";var s;var o=e;var u=t;var a=n;var f=r;var l=i;var c=function(){var e=new o.HandlebarsEnvironment;f.extend(e,o);e.SafeString=u;e.Exception=a;e.Utils=f;e.VM=l;e.template=function(t){return l.template(t,e)};return e};var h=c();h.create=c;s=h;return s}(r,e,n,t,i);var o=function(e){"use strict";function r(e){e=e||{};this.firstLine=e.first_line;this.firstColumn=e.first_column;this.lastColumn=e.last_column;this.lastLine=e.last_line}var t;var n=e;var i={ProgramNode:function(e,t,n,s){var o,u;if(arguments.length===3){s=n;n=null}else if(arguments.length===2){s=t;t=null}r.call(this,s);this.type="program";this.statements=e;this.strip={};if(n){u=n[0];if(u){o={first_line:u.firstLine,last_line:u.lastLine,last_column:u.lastColumn,first_column:u.firstColumn};this.inverse=new i.ProgramNode(n,t,o)}else{this.inverse=new i.ProgramNode(n,t)}this.strip.right=t.left}else if(t){this.strip.left=t.right}},MustacheNode:function(e,t,n,s,o){r.call(this,o);this.type="mustache";this.strip=s;if(n!=null&&n.charAt){var u=n.charAt(3)||n.charAt(2);this.escaped=u!=="{"&&u!=="&"}else{this.escaped=!!n}if(e instanceof i.SexprNode){this.sexpr=e}else{this.sexpr=new i.SexprNode(e,t)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){r.call(this,n);this.type="sexpr";this.hash=t;var i=this.id=e[0];var s=this.params=e.slice(1);var o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(s.length||t)},PartialNode:function(e,t,n,i){r.call(this,i);this.type="partial";this.partialName=e;this.context=t;this.strip=n},BlockNode:function(e,t,i,s,o){r.call(this,o);if(e.sexpr.id.original!==s.path.original){throw new n(e.sexpr.id.original+" doesn't match "+s.path.original,this)}this.type="block";this.mustache=e;this.program=t;this.inverse=i;this.strip={left:e.strip.left,right:s.strip.right};(t||i).strip.left=e.strip.right;(i||t).strip.right=s.strip.left;if(i&&!t){this.isInverse=true}},ContentNode:function(e,t){r.call(this,t);this.type="content";this.string=e},HashNode:function(e,t){r.call(this,t);this.type="hash";this.pairs=e},IdNode:function(e,t){r.call(this,t);this.type="ID";var i="",s=[],o=0;for(var u=0,a=e.length;u<a;u++){var f=e[u].part;i+=(e[u].separator||"")+f;if(f===".."||f==="."||f==="this"){if(s.length>0){throw new n("Invalid path: "+i,this)}else if(f===".."){o++}else{this.isScoped=true}}else{s.push(f)}}this.original=i;this.parts=s;this.string=s.join(".");this.depth=o;this.isSimple=e.length===1&&!this.isScoped&&o===0;this.stringModeValue=this.string},PartialNameNode:function(e,t){r.call(this,t);this.type="PARTIAL_NAME";this.name=e.original},DataNode:function(e,t){r.call(this,t);this.type="DATA";this.id=e},StringNode:function(e,t){r.call(this,t);this.type="STRING";this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){r.call(this,t);this.type="INTEGER";this.original=this.integer=e;this.stringModeValue=Number(e)},BooleanNode:function(e,t){r.call(this,t);this.type="BOOLEAN";this.bool=e;this.stringModeValue=e==="true"},CommentNode:function(e,t){r.call(this,t);this.type="comment";this.comment=e}};t=i;return t}(n);var u=function(){"use strict";var e;var t=function(){function t(e,t){return{left:e.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}function r(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(n,r,i,s,o,u,a){var f=u.length-1;switch(o){case 1:return new s.ProgramNode(u[f-1],this._$);break;case 2:return new s.ProgramNode([],this._$);break;case 3:this.$=new s.ProgramNode([],u[f-1],u[f],this._$);break;case 4:this.$=new s.ProgramNode(u[f-2],u[f-1],u[f],this._$);break;case 5:this.$=new s.ProgramNode(u[f-1],u[f],[],this._$);break;case 6:this.$=new s.ProgramNode(u[f],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[u[f]];break;case 10:u[f-1].push(u[f]);this.$=u[f-1];break;case 11:this.$=new s.BlockNode(u[f-2],u[f-1].inverse,u[f-1],u[f],this._$);break;case 12:this.$=new s.BlockNode(u[f-2],u[f-1],u[f-1].inverse,u[f],this._$);break;case 13:this.$=u[f];break;case 14:this.$=u[f];break;case 15:this.$=new s.ContentNode(u[f],this._$);break;case 16:this.$=new s.CommentNode(u[f],this._$);break;case 17:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 18:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 19:this.$={path:u[f-1],strip:t(u[f-2],u[f])};break;case 20:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 21:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 22:this.$=new s.PartialNode(u[f-2],u[f-1],t(u[f-3],u[f]),this._$);break;case 23:this.$=t(u[f-1],u[f]);break;case 24:this.$=new s.SexprNode([u[f-2]].concat(u[f-1]),u[f],this._$);break;case 25:this.$=new s.SexprNode([u[f]],null,this._$);break;case 26:this.$=u[f];break;case 27:this.$=new s.StringNode(u[f],this._$);break;case 28:this.$=new s.IntegerNode(u[f],this._$);break;case 29:this.$=new s.BooleanNode(u[f],this._$);break;case 30:this.$=u[f];break;case 31:u[f-1].isHelper=true;this.$=u[f-1];break;case 32:this.$=new s.HashNode(u[f],this._$);break;case 33:this.$=[u[f-2],u[f]];break;case 34:this.$=new s.PartialNameNode(u[f],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(u[f],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(u[f],this._$));break;case 37:this.$=new s.DataNode(u[f],this._$);break;case 38:this.$=new s.IdNode(u[f],this._$);break;case 39:u[f-2].push({part:u[f],separator:u[f-1]});this.$=u[f-2];break;case 40:this.$=[{part:u[f]}];break;case 43:this.$=[];break;case 44:u[f-1].push(u[f]);break;case 47:this.$=[u[f]];break;case 48:u[f-1].push(u[f]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e;i.length=i.length-e;s.length=s.length-e}function m(){var e;e=n.lexer.lex()||1;if(typeof e!=="number"){e=n.symbols_[e]||e}return e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;var g,y,b,w,E,S,x={},T,N,C,k;while(true){b=r[r.length-1];if(this.defaultActions[b]){w=this.defaultActions[b]}else{if(g===null||typeof g=="undefined"){g=m()}w=o[b]&&o[b][g]}if(typeof w==="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])if(this.terminals_[T]&&T>2){k.push("'"+this.terminals_[T]+"'")}if(this.lexer.showPosition){L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'"}else{L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'")}this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1){throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g)}switch(w[0]){case 1:r.push(g);i.push(this.lexer.yytext);s.push(this.lexer.yylloc);r.push(w[1]);g=null;if(!y){f=this.lexer.yyleng;u=this.lexer.yytext;a=this.lexer.yylineno;p=this.lexer.yylloc;if(l>0)l--}else{g=y;y=null}break;case 2:N=this.productions_[w[1]][1];x.$=i[i.length-N];x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column};if(d){x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]}S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!=="undefined"){return S}if(N){r=r.slice(0,-1*N*2);i=i.slice(0,-1*N);s=s.slice(0,-1*N)}r.push(this.productions_[w[1]][0]);i.push(x.$);s.push(x._$);C=o[r[r.length-2]][r[r.length-1]];r.push(C);break;case 3:return true}}return true}};var n=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser){this.yy.parser.parseError(t,n)}else{throw new Error(t)}},setInput:function(e){this._input=e;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var e=this._input[0];this.yytext+=e;this.yyleng++;this.offset++;this.match+=e;this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);if(t){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return e},unput:function(e){var t=e.length;var n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-t-1);this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(n.length-1)this.yylineno-=n.length-1;var i=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t};if(this.options.ranges){this.yylloc.range=[i[0],i[0]+this.yyleng-t]}return this},more:function(){this._more=true;return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;if(e.length<20){e+=this._input.substr(0,20-e.length)}return(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput();var t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var e,t,n,r,i,s;if(!this._more){this.yytext="";this.match=""}var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n;r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g);if(s)this.yylineno+=s.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length};this.yytext+=t[0];this.match+=t[0];this.matches=t;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(t[0].length);this.matched+=t[0];e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(e)return e;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function(){var t=this.next();if(typeof t!=="undefined"){return t}else{return this.lex()}},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};e.options={};e.performAction=function(t,n,r,i){function s(e,t){return n.yytext=n.yytext.substr(e,n.yyleng-t)}var o=i;switch(r){case 0:if(n.yytext.slice(-2)==="\\\\"){s(0,1);this.begin("mu")}else if(n.yytext.slice(-1)==="\\"){s(0,1);this.begin("emu")}else{this.begin("mu")}if(n.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:s(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:s(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:n.yytext=s(1,2).replace(/\\"/g,'"');return 32;break;case 24:n.yytext=s(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:n.yytext=s(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return e}();e.lexer=n;r.prototype=e;e.Parser=r;return new r}();e=t;return e}();var a=function(e,t){"use strict";function s(e){if(e.constructor===i.ProgramNode){return e}r.yy=i;return r.parse(e)}var n={};var r=e;var i=t;n.parser=r;n.parse=s;return n}(u,o);var f=function(e){"use strict";function r(){}function i(e,t,r){if(e==null||typeof e!=="string"&&e.constructor!==r.AST.ProgramNode){throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}var i=r.parse(e);var s=(new r.Compiler).compile(i,t);return(new r.JavaScriptCompiler).compile(s,t)}function s(e,t,r){function s(){var n=r.parse(e);var i=(new r.Compiler).compile(n,t);var s=(new r.JavaScriptCompiler).compile(i,t,undefined,true);return r.template(s)}if(e==null||typeof e!=="string"&&e.constructor!==r.AST.ProgramNode){throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}var i;return function(e,t){if(!i){i=s()}return i.call(this,e,t)}}var t={};var n=e;t.Compiler=r;r.prototype={compiler:r,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE"){n.push("DECLARE "+t.name+"="+t.value)}else{r=[];for(var u=0;u<t.args.length;u++){i=t.args[u];if(typeof i==="string"){i='"'+i.replace("\n","\\n")+'"'}r.push(i)}n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t){return false}for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length){return false}for(var s=0;s<r.args.length;s++){if(r.args[s]!==i.args[s]){return false}}}t=this.children.length;if(e.children.length!==t){return false}for(n=0;n<t;n++){if(!this.children[n].equals(e.children[n])){return false}}return true},guid:0,compile:function(e,t){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(n){for(var r in n){this.options.knownHelpers[r]=n[r]}}return this.accept(e)},accept:function(e){var t=e.strip||{},n;if(t.left){this.opcode("strip")}n=this[e.type](e);if(t.right){this.opcode("strip")}return n},program:function(e){var t=e.statements;for(var n=0,r=t.length;n<r;n++){this.accept(t[n])}this.isSimple=r===1;this.depths.list=this.depths.list.sort(function(e,t){return e-t});return this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options);var n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial;this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2){continue}else{this.addDepth(r-1)}}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;if(n){n=this.compileProgram(n)}if(r){r=this.compileProgram(r)}var i=t.sexpr;var s=this.classifySexpr(i);if(s==="helper"){this.helperSexpr(i,n,r)}else if(s==="simple"){this.simpleSexpr(i);this.opcode("pushProgram",n);this.opcode("pushProgram",r);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(i,n,r);this.opcode("pushProgram",n);this.opcode("pushProgram",r);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++){n=t[i];r=n[1];if(this.options.stringParams){if(r.depth){this.addDepth(r.depth)}this.opcode("getContext",r.depth||0);this.opcode("pushStringParam",r.stringModeValue,r.type);if(r.type==="sexpr"){this.sexpr(r)}}else{this.accept(r)}this.opcode("assignToHash",n[0])}this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=true;if(e.context){this.ID(e.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",t.name);this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr);if(e.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth);this.opcode("pushProgram",t);this.opcode("pushProgram",n);this.opcode("invokeAmbiguous",i,s)},simpleSexpr:function(e){var t=e.id;if(t.type==="DATA"){this.DATA(t)}else if(t.parts.length){this.ID(t)}else{this.addDepth(t.depth);this.opcode("getContext",t.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var i=this.setupFullMustacheParams(e,t,r),s=e.id.parts[0];if(this.options.knownHelpers[s]){this.opcode("invokeKnownHelper",i.length,s)}else if(this.options.knownHelpersOnly){throw new n("You specified knownHelpersOnly, but used the unknown helper "+s,e)}else{this.opcode("invokeHelper",i.length,s,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);if(t==="simple"){this.simpleSexpr(e)}else if(t==="helper"){this.helperSexpr(e)}else{this.ambiguousSexpr(e)}},ID:function(e){this.addDepth(e.depth);this.opcode("getContext",e.depth);var t=e.parts[0];if(!t){this.opcode("pushContext")}else{this.opcode("lookupOnContext",e.parts[0])}for(var n=1,r=e.parts.length;n<r;n++){this.opcode("lookup",e.parts[n])}},DATA:function(e){this.options.data=true;if(e.id.isScoped||e.id.depth){throw new n("Scoped data references are not supported: "+e.original,e)}this.opcode("lookupData");var t=e.id.parts;for(var r=0,i=t.length;r<i;r++){this.opcode("lookup",t[r])}},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(e===0){return}if(!this.depths[e]){this.depths[e]=true;this.depths.list.push(e)}},classifySexpr:function(e){var t=e.isHelper;var n=e.eligibleHelper;var r=this.options;if(n&&!t){var i=e.id.parts[0];if(r.knownHelpers[i]){t=true}else if(r.knownHelpersOnly){n=false}}if(t){return"helper"}else if(n){return"ambiguous"}else{return"simple"}},pushParams:function(e){var t=e.length,n;while(t--){n=e[t];if(this.options.stringParams){if(n.depth){this.addDepth(n.depth)}this.opcode("getContext",n.depth||0);this.opcode("pushStringParam",n.stringModeValue,n.type);if(n.type==="sexpr"){this.sexpr(n)}}else{this[n.type](n)}}},setupFullMustacheParams:function(e,t,n){var r=e.params;this.pushParams(r);this.opcode("pushProgram",t);this.opcode("pushProgram",n);if(e.hash){this.hash(e.hash)}else{this.opcode("emptyHash")}return r}};t.precompile=i;t.compile=s;return t}(n);var l=function(e,t){"use strict";function u(e){this.value=e}function a(){}var n;var r=e.COMPILER_REVISION;var i=e.REVISION_CHANGES;var s=e.log;var o=t;a.prototype={nameLookup:function(e,t){var n,r;if(e.indexOf("depth")===0){n=true}if(/^[0-9]+$/.test(t)){r=e+"["+t+"]"}else if(a.isValidJavaScriptVariableName(t)){r=e+"."+t}else{r=e+"['"+t+"']"}if(n){return"("+e+" && "+r+")"}else{return r}},compilerInfo:function(){var e=r,t=i[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){if(this.environment.isSimple){return"return "+e+";"}else{return{appendToBuffer:true,content:e,toString:function(){return"buffer += "+e+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e;this.options=t||{};s("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!n;this.context=n||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(e,t);var i=e.opcodes,u;this.i=0;for(var a=i.length;this.i<a;this.i++){u=i[this.i];if(u.opcode==="DECLARE"){this[u.name]=u.value}else{this[u.opcode].apply(this,u.args)}if(u.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new o("Compile completed with content left on stack")}return this.createFunctionContext(r)},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace;var n="helpers = this.merge(helpers, "+t+".helpers);";if(this.environment.usePartial){n=n+" partials = this.merge(partials, "+t+".partials);"}if(this.options.data){n=n+" data = data || {};"}e.push(n)}else{e.push("")}if(!this.environment.isSimple){e.push(", buffer = "+this.initializeBuffer())}else{e.push("")}this.lastContext=0;this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0){this.source[1]=this.source[1]+", "+t.join(", ")}if(!this.isChild){for(var n in this.context.aliases){if(this.context.aliases.hasOwnProperty(n)){this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,o=this.environment.depths.list.length;i<o;i++){r.push("depth"+this.environment.depths.list[i])}var u=this.mergeSource();if(!this.isChild){u=this.compilerInfo()+u}if(e){r.push(u);return Function.apply(this,r)}else{var a="function "+(this.name||"")+"("+r.join(",")+") {\n  "+u+"}";s("debug",a+"\n\n");return a}},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];if(i.appendToBuffer){if(t){t=t+"\n    + "+i.content}else{t=i.content}}else{if(t){e+="buffer += "+t+";\n  ";t=undefined}e+=i+"\n  "}}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);this.replaceStack(function(t){e.splice(1,0,t);return"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t);this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){if(this.pendingContent){e=this.pendingContent+e}if(this.stripNext){e=e.replace(/^\s+/,"")}this.pendingContent=e},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){if(this.lastContext!==e){this.lastContext=e}},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext);this.pushString(t);if(t!=="sexpr"){if(typeof e==="string"){this.pushString(e)}else{this.pushStackLiteral(e)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+e.contexts.join(",")+"}");this.push("{"+e.types.join(",")+"}")}this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.inlineStack.push(e);return e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){if(e!=null){this.pushStackLiteral(this.programExpression(e))}else{this.pushStackLiteral(null)}},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var r=this.lastHelper=this.setupHelper(e,t,true);var i=this.nameLookup("depth"+this.lastContext,t,"context");var s="helper = "+r.name+" || "+i;if(r.paramsInit){s+=","+r.paramsInit}this.push("("+s+",helper "+"? helper.call("+r.callParams+") "+": helperMissing.call("+r.helperMissingParams+"))");if(!n){this.flushInline()}},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var n=this.setupHelper(0,e,t);var r=this.lastHelper=this.nameLookup("helpers",e,"helper");var i=this.nameLookup("depth"+this.lastContext,e,"context");var s=this.nextStack();if(n.paramsInit){this.pushSource(n.paramsInit)}this.pushSource("if (helper = "+r+") { "+s+" = helper.call("+n.callParams+"); }");this.pushSource("else { helper = "+i+"; "+s+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];if(this.options.data){t.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;if(this.options.stringParams){r=this.popStack();n=this.popStack()}var i=this.hash;if(n){i.contexts.push("'"+e+"': "+n)}if(r){i.types.push("'"+e+"': "+r)}i.values.push("'"+e+"': ("+t+")")},compiler:a,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s];i=new this.compiler;var u=this.matchExistingProgram(r);if(u==null){this.context.programs.push("");u=this.context.programs.length;r.index=u;r.name="program"+u;this.context.programs[u]=i.compile(r,t,this.context);this.context.environments[u]=r}else{r.index=u;r.name="program"+u}}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e)){return t}}},programExpression:function(e){this.context.aliases.self="this";if(e==null){return"self.noop"}var t=this.environment.children[e],n=t.depths.list,r;var i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++){r=n[s];if(r===1){i.push("depth0")}else{i.push("depth"+(r-1))}}return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e);this.pushSource(e+" = "+t+";")},useRegister:function(e){if(!this.registers[e]){this.registers[e]=true;this.registers.list.push(e)}},pushStackLiteral:function(e){return this.push(new u(e))},pushSource:function(e){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(e){this.source.push(e)}},pushStack:function(e){this.flushInline();var t=this.incrStack();if(e){this.pushSource(t+" = "+e+";")}this.compileStack.push(t);return t},replaceStack:function(e){var t="",n=this.isInline(),r,i,s;if(n){var o=this.popStack(true);if(o instanceof u){r=o.value;s=true}else{i=!this.stackSlot;var a=!i?this.topStackName():this.incrStack();t="("+this.push(a)+" = "+o+"),";r=this.topStack()}}else{r=this.topStack()}var f=e.call(this,r);if(n){if(!s){this.popStack()}if(i){this.stackSlot--}this.push("("+t+f+")")}else{if(!/^stack/.test(r)){r=this.nextStack()}this.pushSource(r+" = ("+t+f+");")}return r},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof u){this.compileStack.push(r)}else{this.pushStack(r)}}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof u){return n.value}else{if(!t){if(!this.stackSlot){throw new o("Invalid stack pop")}this.stackSlot--}return n}},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];if(!e&&n instanceof u){return n.value}else{return n}},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[],i=this.setupParams(e,r,n);var s=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:i,name:s,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(e,t){var n=[],r=[],i=[],s,o,u;n.push("hash:"+this.popStack());if(this.options.stringParams){n.push("hashTypes:"+this.popStack());n.push("hashContexts:"+this.popStack())}o=this.popStack();u=this.popStack();if(u||o){if(!u){this.context.aliases.self="this";u="self.noop"}if(!o){this.context.aliases.self="this";o="self.noop"}n.push("inverse:"+o);n.push("fn:"+u)}for(var a=0;a<e;a++){s=this.popStack();t.push(s);if(this.options.stringParams){i.push(this.popStack());r.push(this.popStack())}}if(this.options.stringParams){n.push("contexts:["+r.join(",")+"]");n.push("types:["+i.join(",")+"]")}if(this.options.data){n.push("data:data")}return n},setupParams:function(e,t,n){var r="{"+this.setupOptions(e,t).join(",")+"}";if(n){this.useRegister("options");t.push("options");return"options="+r}else{t.push(r);return""}}};var f=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var l=a.RESERVED_WORDS={};for(var c=0,h=f.length;c<h;c++){l[f[c]]=true}a.isValidJavaScriptVariableName=function(e){if(!a.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)){return true}return false};n=a;return n}(r,n);var c=function(e,t,n,r,i){"use strict";var s;var o=e;var u=t;var a=n.parser;var f=n.parse;var l=r.Compiler;var c=r.compile;var h=r.precompile;var p=i;var d=o.create;var v=function(){var e=d();e.compile=function(t,n){return c(t,n,e)};e.precompile=function(t,n){return h(t,n,e)};e.AST=u;e.Compiler=l;e.JavaScriptCompiler=p;e.Parser=a;e.parse=f;return e};o=v();o.create=v;s=o;return s}(s,o,a,f,l);return c}()
</script>

<script>
// Save file
/* Copyright :copyright: 2014 Eli Grey. | Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. */
var saveAs=saveAs||typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i=!e.externalHost&&"download"in r,s=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},o=e.webkitRequestFileSystem,u=e.requestFileSystem||o||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f="application/octet-stream",l=0,c=[],h=function(){var e=c.length;while(e--){var t=c[e];if(typeof t==="string"){n().revokeObjectURL(t)}else{t.remove()}}c.length=0},p=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){a(s)}}}},d=function(t,a){var h=this,d=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);c.push(e);return e},b=function(){p(h,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}h.readyState=h.DONE;b()},E=function(e){return function(){if(h.readyState!==h.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;h.readyState=h.INIT;if(!a){a="download"}if(i){m=y(t);r.href=m;r.download=a;s(r);h.readyState=h.DONE;b();return}if(e.chrome&&d&&d!==f){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,f);v=true}if(o&&a!=="download"){a+=".download"}if(d===f||o){g=e}if(!u){w();return}l+=t.size;u(e.TEMPORARY,l,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(a,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();c.push(e);h.readyState=h.DONE;p(h,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=h["on"+e]});n.write(t);h.abort=function(){n.abort();h.readyState=h.DONE};h.readyState=h.WRITING}),w)}),w)};e.getFile(a,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},v=d.prototype,m=function(e,t){return new d(e,t)};v.abort=function(){var e=this;e.readyState=e.DONE;p(e,"abort")};v.readyState=v.INIT=0;v.WRITING=1;v.DONE=2;v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null;e.addEventListener("unload",h,false);m.unload=function(){h();e.removeEventListener("unload",h,false)};return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module!==null){module.exports=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!=null){define([],function(){return saveAs})}
</script>

<script>
/* Autolinker.js | 0.11.0
 * Copyright(c) 2014 Gregory Jacobs <greg@greg-jacobs.com> | MIT Licensed. http://www.opensource.org/licenses/mit-license.php | https://github.com/gregjacobs/Autolinker.js
 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof exports?module.exports=b():a.Autolinker=b()}(this,function(){var a=function(a){a=a||{};for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};return a.prototype={constructor:a,newWindow:!0,stripPrefix:!0,twitter:!0,email:!0,urls:!0,className:"",matcherRegex:function(){var a=/(^|[^\w])@(\w{1,15})/,b=/(?:[\-;:&=\+\$,\w\.]+@)/,c=/(?:[A-Za-z]{3,9}:(?:\/\/)?)/,d=/(?:www\.)/,e=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,f=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,g=/(?:[\-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|])?/;return new RegExp(["(",a.source,")","|","(",b.source,e.source,f.source,")","|","(","(?:","(?:",c.source,e.source,")","|","(?:","(.?//)?",d.source,e.source,")","|","(?:","(.?//)?",e.source,f.source,")",")",g.source,")"].join(""),"gi")}(),protocolRelativeRegex:/(.)?\/\//,htmlRegex:function(){var a=/[0-9a-zA-Z:]+/,b=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,c=/(?:".*?"|'.*?'|[^'"=<>`\s]+)/;return new RegExp(["<(/)?","("+a.source+")","(?:","\\s+",b.source,"(?:\\s*=\\s*"+c.source+")?",")*","\\s*",">"].join(""),"g")}(),urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,link:function(a){return this.processHtml(a)},processHtml:function(a){for(var b,c,d=this.htmlRegex,e=0,f=0,g=[];null!==(b=d.exec(a));){var h=b[0],i=b[2],j=!!b[1];c=a.substring(e,b.index),e=b.index+h.length,"a"===i?j?(f=Math.max(f-1,0),0===f&&g.push(c)):(f++,g.push(this.processTextNode(c))):g.push(0===f?this.processTextNode(c):c),g.push(h)}if(e<a.length){var k=this.processTextNode(a.substring(e));g.push(k)}return g.join("")},processTextNode:function(a){var b=this,c=this.matcherRegex,d=this.twitter,e=this.email,f=this.urls;return a.replace(c,function(a,c,g,h,i,j,k,l){var m=c,n=g,o=h,p=i,q=j,r=k||l,s="",t="";if(m&&!d||p&&!e||q&&!f||q&&-1===q.indexOf(".")||q&&/^[A-Za-z]{3,9}:/.test(q)&&!/:.*?[A-Za-z]/.test(q)||r&&/^[\w]\/\//.test(r))return a;var u=a.charAt(a.length-1);if(")"===u){var v=a.match(/\(/g),w=a.match(/\)/g),x=v&&v.length||0,y=w&&w.length||0;y>x&&(a=a.substr(0,a.length-1),t=")")}var z,A=a,B=a;if(m)z="twitter",s=n,A="https://twitter.com/"+o,B="@"+o;else if(p)z="email",A="mailto:"+p,B=p;else if(z="url",r){var C=new RegExp("^"+b.protocolRelativeRegex.source),D=r.match(C)[1]||"";s=D+s,A=A.replace(C,"//"),B=B.replace(C,"")}else/^[A-Za-z]{3,9}:/i.test(A)||(A="http://"+A);
var E=b.createAnchorTag(z,A,B);return s+E+t})},createAnchorTag:function(a,b,c){var d=this.createAnchorAttrsStr(a,b);return c=this.processAnchorText(c),"<a "+d+">"+c+"</a>"},createAnchorAttrsStr:function(a,b){var c=['href="'+b+'"'],d=this.createCssClass(a);return d&&c.push('class="'+d+'"'),this.newWindow&&c.push('target="_blank"'),c.join(" ")},createCssClass:function(a){var b=this.className;return b?b+" "+b+"-"+a:""},processAnchorText:function(a){return this.stripPrefix&&(a=this.stripUrlPrefix(a)),a=this.removeTrailingSlash(a),a=this.doTruncate(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},removeTrailingSlash:function(a){return"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1)),a},doTruncate:function(a){var b=this.truncate;return b&&a.length>b&&(a=a.substring(0,b-2)+".."),a}},a.link=function(b,c){var d=new a(c);return d.link(b)},a});
</script>

<script>
// Markdown
/*Copyright (c) 2014 PageDown | Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sellcopies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.*/
"use strict";var Markdown;if(typeof exports==="object"&&typeof require==="function")Markdown=exports;else Markdown={};(function(){function e(e){return e}function t(e){return false}function n(){}function r(){}n.prototype={chain:function(t,n){var r=this[t];if(!r)throw new Error("unknown hook "+t);if(r===e)this[t]=n;else this[t]=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=r.apply(null,t);return n.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}};Markdown.HookCollection=n;r.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}};Markdown.Converter=function(t){function c(e){e=e.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,t,n,r,i,u){t=t.toLowerCase();s.set(t,P(n));if(i){return r}else if(u){o.set(t,u.replace(/"/g,"&quot;"))}return""});return e}function h(e){var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,d);e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,d);e=e.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,d);e=e.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,d);e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,d);return e}function p(e){e=e.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(u.push(e)-1)+"K\n\n"}function d(e,t){return p(t)}function m(e,t){e=i.preBlockGamut(e,v);e=T(e);var n="<hr />\n";e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,n);e=e.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,n);e=e.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,n);e=N(e);e=L(e);e=_(e);e=i.postBlockGamut(e,v);e=h(e);e=D(e,t);return e}function g(e){e=i.preSpanGamut(e);e=A(e);e=y(e);e=H(e);e=E(e);e=b(e);e=R(e);e=e.replace(/~P/g,"://");e=P(e);e=M(e);e=e.replace(/  +\n/g," <br>\n");e=i.postSpanGamut(e);return e}function y(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");t=$(t,e.charAt(1)=="!"?"\\`*_/":"\\`*_");return t});return e}function b(e){e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w);e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w);e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,w);return e}function w(e,t,n,r,i,u,a,f){if(f==undefined)f="";var l=t;var c=n.replace(/:\/\//g,"~P");var h=r.toLowerCase();var p=i;var d=f;if(p==""){if(h==""){h=c.toLowerCase().replace(/ ?\n/g," ")}p="#"+h;if(s.get(h)!=undefined){p=s.get(h);if(o.get(h)!=undefined){d=o.get(h)}}else{if(l.search(/\(\s*\)$/m)>-1){p=""}else{return l}}}p=V(p);p=$(p,"*_");var v='<a href="'+p+'"';if(d!=""){d=S(d);d=$(d,"*_");v+=' title="'+d+'"'}v+=">"+c+"</a>";return v}function E(e){e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,x);e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,x);return e}function S(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function x(e,t,n,r,i,u,a,f){var l=t;var c=n;var h=r.toLowerCase();var p=i;var d=f;if(!d)d="";if(p==""){if(h==""){h=c.toLowerCase().replace(/ ?\n/g," ")}p="#"+h;if(s.get(h)!=undefined){p=s.get(h);if(o.get(h)!=undefined){d=o.get(h)}}else{return l}}c=$(S(c),"*_[]()");p=$(p,"*_");var v='<img src="'+p+'" alt="'+c+'"';d=S(d);d=$(d,"*_");v+=' title="'+d+'"';v+=" />";return v}function T(e){e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,t){return"<h1>"+g(t)+"</h1>\n\n"});e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,t){return"<h2>"+g(t)+"</h2>\n\n"});e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,t,n){var r=t.length;return"<h"+r+">"+g(n)+"</h"+r+">\n\n"});return e}function N(e,t){e+="~0";var n=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(a){e=e.replace(n,function(e,n,r){var i=n;var s=r.search(/[*+-]/g)>-1?"ul":"ol";var o=k(i,s,t);o=o.replace(/\s+$/,"");o="<"+s+">"+o+"</"+s+">\n";return o})}else{n=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;e=e.replace(n,function(e,t,n,r){var i=t;var s=n;var o=r.search(/[*+-]/g)>-1?"ul":"ol";var u=k(s,o);u=i+"<"+o+">\n"+u+"</"+o+">\n";return u})}e=e.replace(/~0/,"");return e}function k(e,t,n){a++;e=e.replace(/\n{2,}$/,"\n");e+="~0";var r=C[t];var i=new RegExp("(^[ \\t]*)("+r+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+r+")[ \\t]+))","gm");var s=false;e=e.replace(i,function(e,t,r,i){var o=i;var u=t;var a=/\n\n$/.test(o);var f=a||o.search(/\n{2,}/)>-1;if(f||s){o=m(z(o),true)}else{o=N(z(o),true);o=o.replace(/\n$/,"");if(!n)o=g(o)}s=a;return"<li>"+o+"</li>\n"});e=e.replace(/~0/g,"");a--;return e}function L(e){e+="~0";e=e.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t;var i=n;r=O(z(r));r=W(r);r=r.replace(/^\n+/g,"");r=r.replace(/\n+$/g,"");r="<pre><code>"+r+"\n</code></pre>";return"\n\n"+r+"\n\n"+i});e=e.replace(/~0/,"");return e}function A(e){e=e.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var s=r;s=s.replace(/^([ \t]*)/g,"");s=s.replace(/[ \t]*$/g,"");s=O(s);s=s.replace(/:\/\//g,"~P");return t+"<code>"+s+"</code>"});return e}function O(e){e=e.replace(/&/g,"&");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");e=$(e,"*_{}[]\\",false);return e}function M(e){e=f(e);e=e.replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>");e=e.replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>");return l(e)}function _(e){e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;n=n.replace(/^[ \t]*>[ \t]?/gm,"~0");n=n.replace(/~0/g,"");n=n.replace(/^[ \t]+$/gm,"");n=m(n);n=n.replace(/(^|\n)/g,"$1  ");n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;n=n.replace(/^  /mg,"~0");n=n.replace(/~0/g,"");return n});return p("<blockquote>\n"+n+"\n</blockquote>")});return e}function D(e,t){e=e.replace(/^\n+/g,"");e=e.replace(/\n+$/g,"");var n=e.split(/\n{2,}/g);var r=[];var i=/~K(\d+)K/;var s=n.length;for(var o=0;o<s;o++){var a=n[o];if(i.test(a)){r.push(a)}else if(/\S/.test(a)){a=g(a);a=a.replace(/^([ \t]*)/g,"<p>");a+="</p>";r.push(a)}}if(!t){s=r.length;for(var o=0;o<s;o++){var f=true;while(f){f=false;r[o]=r[o].replace(/~K(\d+)K/g,function(e,t){f=true;return u[t]})}}}return r.join("\n\n")}function P(e){e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&");e=e.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;");return e}function H(e){e=e.replace(/\\(\\)/g,J);e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,J);return e}function q(e,t,n,r){if(t)return e;if(r.charAt(r.length-1)!==")")return"<"+n+r+">";var i=r.match(/[()]/g);var s=0;for(var o=0;o<i.length;o++){if(i[o]==="("){if(s<=0)s=1;else s++}else{s--}}var u="";if(s<0){var a=new RegExp("\\){1,"+ -s+"}$");r=r.replace(a,function(e){u=e;return""})}if(u){var f=r.charAt(r.length-1);if(!I.test(f)){u=f+u;r=r.substr(0,r.length-1)}}return"<"+n+r+">"+u}function R(e){e=e.replace(F,q);var t=function(e,t){var n=V(t);n=$(n,"*_");return'<a href="'+n+'">'+i.plainLinkText(t)+"</a>"};e=e.replace(/<((https?|ftp):[^'">\s]+)>/gi,t);return e}function U(e){e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)});return e}function z(e){e=e.replace(/^(\t|[ ]{1,4})/gm,"~0");e=e.replace(/~0/g,"");return e}function W(e){if(!/\t/.test(e))return e;var t=["    ","   ","  "," "],n=0,r;return e.replace(/[\n\t]/g,function(e,i){if(e==="\n"){n=i+1;return e}r=(i-n)%4;n=i+1;return t[r]})}function V(e){if(!e)return"";var t=e.length;return e.replace(X,function(n,r){if(n=="~D")return"%24";if(n==":"){if(r==t-1||/[0-9\/]/.test(e.charAt(r+1)))return":"}return"%"+n.charCodeAt(0).toString(16)})}function $(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";if(n){r="\\\\"+r}var i=new RegExp(r,"g");e=e.replace(i,J);return e}function J(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}var i=this.hooks=new n;i.addNoop("plainLinkText");i.addNoop("preConversion");i.addNoop("postNormalization");i.addNoop("preBlockGamut");i.addNoop("postBlockGamut");i.addNoop("preSpanGamut");i.addNoop("postSpanGamut");i.addNoop("postConversion");var s;var o;var u;var a;t=t||{};var f=e,l=e;if(t.nonAsciiLetters){(function(){var e=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g;var t="Q".charCodeAt(0);var n="A".charCodeAt(0);var r="Z".charCodeAt(0);var i="a".charCodeAt(0)-r-1;f=function(s){return s.replace(e,function(e){var s=e.charCodeAt(0);var o="";var u;while(s>0){u=s%51+n;if(u>=t)u++;if(u>r)u+=i;o=String.fromCharCode(u)+o;s=s/51|0}return"Q"+o+"Q"})};l=function(e){return e.replace(/Q([A-PR-Za-z]{1,3})Q/g,function(e,s){var o=0;var u;for(var a=0;a<s.length;a++){u=s.charCodeAt(a);if(u>r)u-=i;if(u>t)u--;u-=n;o=o*51+u}return String.fromCharCode(o)})}})()}this.makeHtml=function(e){if(s)throw new Error("Recursive call to converter.makeHtml");s=new r;o=new r;u=[];a=0;e=i.preConversion(e);e=e.replace(/~/g,"~T");e=e.replace(/\$/g,"~D");e=e.replace(/\r\n/g,"\n");e=e.replace(/\r/g,"\n");e="\n\n"+e+"\n\n";e=W(e);e=e.replace(/^[ \t]+$/mg,"");e=i.postNormalization(e);e=h(e);e=c(e);e=m(e);e=U(e);e=e.replace(/~D/g,"$$");e=e.replace(/~T/g,"~");e=i.postConversion(e);u=o=s=null;return e};var v=function(e){return m(e)};var C={ol:"\\d+[.]",ul:"[*+-]"};var B="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",j="[-A-Z0-9+&@#/%=~_|[\\])]",F=new RegExp('(="|<)?\\b(https?|ftp)(://'+B+"*"+j+")(?=$|\\W)","gi"),I=new RegExp(j,"i");var X=/(?:["'*()[\]:]|~D)/g}})()
</script>

<script>
/* AES implementation in JavaScript (c) Chris Veness 2005-2011  */
var Aes={};Aes.cipher=function(e,t){var n=4;var r=t.length/n-1;var i=[[],[],[],[]];for(var s=0;s<4*n;s++)i[s%4][Math.floor(s/4)]=e[s];i=Aes.addRoundKey(i,t,0,n);for(var o=1;o<r;o++){i=Aes.subBytes(i,n);i=Aes.shiftRows(i,n);i=Aes.mixColumns(i,n);i=Aes.addRoundKey(i,t,o,n)}i=Aes.subBytes(i,n);i=Aes.shiftRows(i,n);i=Aes.addRoundKey(i,t,r,n);var u=new Array(4*n);for(var s=0;s<4*n;s++)u[s]=i[s%4][Math.floor(s/4)];return u};Aes.keyExpansion=function(e){var t=4;var n=e.length/4;var r=n+6;var i=new Array(t*(r+1));var s=new Array(4);for(var o=0;o<n;o++){var u=[e[4*o],e[4*o+1],e[4*o+2],e[4*o+3]];i[o]=u}for(var o=n;o<t*(r+1);o++){i[o]=new Array(4);for(var a=0;a<4;a++)s[a]=i[o-1][a];if(o%n==0){s=Aes.subWord(Aes.rotWord(s));for(var a=0;a<4;a++)s[a]^=Aes.rCon[o/n][a]}else if(n>6&&o%n==4){s=Aes.subWord(s)}for(var a=0;a<4;a++)i[o][a]=i[o-n][a]^s[a]}return i};Aes.subBytes=function(e,t){for(var n=0;n<4;n++){for(var r=0;r<t;r++)e[n][r]=Aes.sBox[e[n][r]]}return e};Aes.shiftRows=function(e,t){var n=new Array(4);for(var r=1;r<4;r++){for(var i=0;i<4;i++)n[i]=e[r][(i+r)%t];for(var i=0;i<4;i++)e[r][i]=n[i]}return e};Aes.mixColumns=function(e,t){for(var n=0;n<4;n++){var r=new Array(4);var i=new Array(4);for(var s=0;s<4;s++){r[s]=e[s][n];i[s]=e[s][n]&128?e[s][n]<<1^283:e[s][n]<<1}e[0][n]=i[0]^r[1]^i[1]^r[2]^r[3];e[1][n]=r[0]^i[1]^r[2]^i[2]^r[3];e[2][n]=r[0]^r[1]^i[2]^r[3]^i[3];e[3][n]=r[0]^i[0]^r[1]^r[2]^i[3]}return e};Aes.addRoundKey=function(e,t,n,r){for(var i=0;i<4;i++){for(var s=0;s<r;s++)e[i][s]^=t[n*4+s][i]}return e};Aes.subWord=function(e){for(var t=0;t<4;t++)e[t]=Aes.sBox[e[t]];return e};Aes.rotWord=function(e){var t=e[0];for(var n=0;n<3;n++)e[n]=e[n+1];e[3]=t;return e};Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]]
/* AES Counter-mode implementation in JavaScript (c) Chris Veness 2005-2011  */
Aes.Ctr={};Aes.Ctr.encrypt=function(e,t,n){var r=16;if(!(n==128||n==192||n==256))return"";e=Utf8.encode(e);t=Utf8.encode(t);var i=n/8;var s=new Array(i);for(var o=0;o<i;o++){s[o]=isNaN(t.charCodeAt(o))?0:t.charCodeAt(o)}var u=Aes.cipher(s,Aes.keyExpansion(s));u=u.concat(u.slice(0,i-16));var a=new Array(r);var f=(new Date).getTime();var l=f%1e3;var c=Math.floor(f/1e3);var h=Math.floor(Math.random()*65535);for(var o=0;o<2;o++)a[o]=l>>>o*8&255;for(var o=0;o<2;o++)a[o+2]=h>>>o*8&255;for(var o=0;o<4;o++)a[o+4]=c>>>o*8&255;var p="";for(var o=0;o<8;o++)p+=String.fromCharCode(a[o]);var d=Aes.keyExpansion(u);var v=Math.ceil(e.length/r);var m=new Array(v);for(var g=0;g<v;g++){for(var y=0;y<4;y++)a[15-y]=g>>>y*8&255;for(var y=0;y<4;y++)a[15-y-4]=g/4294967296>>>y*8;var b=Aes.cipher(a,d);var w=g<v-1?r:(e.length-1)%r+1;var E=new Array(w);for(var o=0;o<w;o++){E[o]=b[o]^e.charCodeAt(g*r+o);E[o]=String.fromCharCode(E[o])}m[g]=E.join("")}var S=p+m.join("");S=Base64.encode(S);return S};Aes.Ctr.decrypt=function(e,t,n){var r=16;if(!(n==128||n==192||n==256))return"";e=Base64.decode(e);t=Utf8.encode(t);var i=n/8;var s=new Array(i);for(var o=0;o<i;o++){s[o]=isNaN(t.charCodeAt(o))?0:t.charCodeAt(o)}var u=Aes.cipher(s,Aes.keyExpansion(s));u=u.concat(u.slice(0,i-16));var a=new Array(8);ctrTxt=e.slice(0,8);for(var o=0;o<8;o++)a[o]=ctrTxt.charCodeAt(o);var f=Aes.keyExpansion(u);var l=Math.ceil((e.length-8)/r);var c=new Array(l);for(var h=0;h<l;h++)c[h]=e.slice(8+h*r,8+h*r+r);e=c;var p=new Array(e.length);for(var h=0;h<l;h++){for(var d=0;d<4;d++)a[15-d]=h>>>d*8&255;for(var d=0;d<4;d++)a[15-d-4]=(h+1)/4294967296-1>>>d*8&255;var v=Aes.cipher(a,f);var m=new Array(e[h].length);for(var o=0;o<e[h].length;o++){m[o]=v[o]^e[h].charCodeAt(o);m[o]=String.fromCharCode(m[o])}p[h]=m.join("")}var g=p.join("");g=Utf8.decode(g);return g}
/* Base64 class: Base 64 encoding / decoding (c) Chris Veness 2002-2011  */
var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(e,t){t=typeof t=="undefined"?false:t;var n,r,i,s,o,u,a,f,l=[],c="",h,p,d;var v=Base64.code;p=t?Utf8.encode(e):e;h=p.length%3;if(h>0){while(h++<3){c+="=";p+="\0"}}for(h=0;h<p.length;h+=3){n=p.charCodeAt(h);r=p.charCodeAt(h+1);i=p.charCodeAt(h+2);s=n<<16|r<<8|i;o=s>>18&63;u=s>>12&63;a=s>>6&63;f=s&63;l[h/3]=v.charAt(o)+v.charAt(u)+v.charAt(a)+v.charAt(f)}d=l.join("");d=d.slice(0,d.length-c.length)+c;return d};Base64.decode=function(e,t){t=typeof t=="undefined"?false:t;var n,r,i,s,o,u,a,f,l=[],c,h;var p=Base64.code;h=t?Utf8.decode(e):e;for(var d=0;d<h.length;d+=4){s=p.indexOf(h.charAt(d));o=p.indexOf(h.charAt(d+1));u=p.indexOf(h.charAt(d+2));a=p.indexOf(h.charAt(d+3));f=s<<18|o<<12|u<<6|a;n=f>>>16&255;r=f>>>8&255;i=f&255;l[d/4]=String.fromCharCode(n,r,i);if(a==64)l[d/4]=String.fromCharCode(n,r);if(u==64)l[d/4]=String.fromCharCode(n)}c=l.join("");return t?Utf8.decode(c):c}
/* Utf8 class: encode / decode between multi-byte Unicode characters and UTF-8 multiple single-byte character encoding (c) Chris Veness 2002-2011 */
var Utf8={};Utf8.encode=function(e){var t=e.replace(/[\u0080-\u07ff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|t&63)});t=t.replace(/[\u0800-\uffff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|t&63)});return t};Utf8.decode=function(e){var t=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var t=(e.charCodeAt(0)&15)<<12|(e.charCodeAt(1)&63)<<6|e.charCodeAt(2)&63;return String.fromCharCode(t)});t=t.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var t=(e.charCodeAt(0)&31)<<6|e.charCodeAt(1)&63;return String.fromCharCode(t)});return t}
</script>

</head>
<body>

<div style="display:inline;" id="tjs-pageheader"></div>
<div style="display:inline;" id="tjs-filterresults"></div>
<div style="display:inline;" id="tjs-pagefooter"></div>
 
<script id="editthingydata" type="text/x-handlebars">
    <!-- Sample handlebars template. Not used. Can be deleted. -->
</script>

<script>
	// Add the favicon
	
	var favIcon = "iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAGsklEQVR4nO3dsU+d1xnA4fdgCxTLlpGIIoEUxVIlu5VaGeNkyGT+AFfN2o0JGKn6B9jdK9Ujly7u0N1RvJdMGSIw3ppOzgJLkLDCYiT7dDBuK7lc4JpzPy7v86z+7nmPrjg/7nd18Y0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiIkoXQ+vmndsRMdnFbDin9srcs+fDHjqUANTNO/fizdjDiJgfxjwYcU9i7M1KmXv2Y+tBzQNQv5/7S5Sy0noOXCx1L6KslM83/tZyStMA1O9nfxfl0pOWM+DiqnsxVudb3ho0C0DdvPNZvClbEcW9Pgysvogos+XzjZctVh9rsWhERNSy4PDDhyo3ImKh1ertAvCmfNVsbcikjmIASsw2WxsyaXiW2gUAOPcEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDELp/m4l6vd73WulBKmYyI2Vrr5NFX//UDtwa8s7q6+o9+/15KWa+17pVSHi8tLb086brlJBcdHvxHpZSFky68eHftpJcCx1jbWDzxtbXWx6WUlZOE4NhbgF6vdz0iXpzm8APdOTyrLw7Pbl8neQ9gPSL6vNQHzqHJeHt2++obgF6v9yAiZs9oQ8BwzR6e4SP1DUCtdeFMtwMM1XFn+MgArK6u3i6l3Djj/QBDVEq5sbq6evuofz8yAGNjY+774QLod5Z9EAgSEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMSODMDi4uK3EbE3xL0AZ2/v8Cz/X31fAdRan5z9foBhOe4M9w1AKWUlvAqAUbV3eIaP1DcAS0tLL2ut87XWF2e6LaCpWuuLWuv80tLSy37XHfsm4PLy8vNSymxEbJ3Z7oCWtkops8vLy8+Pu7CcZtW1tbV7tdaVWuvkcdcuzW/On2bt/7W9sz3oQz/I1NRUTIxPdDK7r4PtiIOdrndxOuPTEeMzXe/iPa8OXsXu7m4ns2emB38+eutz68ddU0rZq7U+Xl5e/vqk654qAKdRa62DPnZtbe0st3Ji9+/fj5mZ8/dD+x+vtiN21iJ2n3a9k/dduhox9duIT34fMXF+n8Pt7e14+rSb529xcXHgx5ZSmpxVnwMYJRMzETceRvzq7xEf3ex6N/91/V7Er7+J+PSP5/rw8z4BGEVXbkXcePD2t27XxqffRunyta53wgAEYFRdufX24HXtF392+EeYAIyyyflubwWu3n0bIkaWAIy6qfvdzZ68191szoQAjLoufwP77T/yBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMQEABITAEhMACCxdt8O/M/Fgb8d2NeDn9xP++Px3Q9Tncz+8tZufHz1oJPZgxrVrwcvv1xrclYvt1g0IiL2NwZ+6ExXXzV3sBMxWj/PcfDzdOzs/6aj2RsRsdPJ7EFNRIc/X/vn77lyCwCJCQAkJgCQmABAYgIAiQkAJCYAkJgAQGICAIkJACQmAJCYAEBiAgCJtftrQIZi6qPduH/zm85mM9oEYMRNXD6ImWvn789MGQ1uASAxAYDEBAASEwBITAAgMQGAxAQAEhMASEwAIDEBgMR8FPgC+OGnm7F/MPyvu5m+tu1jyCNOAC6Af+3ejJ39wb93blB3IwRgxLkFgMQEABITAEhMACAxbwJeAF9++l0cvB4f+txr4z8PfSZnSwAugI+v+K+5GIxbAEhMACAxAYDEBAASaxiAutdubcik3VlqGICy3m5tSOVJq4XbBaC+ftxsbchkrD5utnSrhcsXW19HxHqr9SGFWh+VuWfftlq+9ZuAX0XDly9wodX6qHyx+YeWI0rLxd+pG3MPopaHw5gFF0KpD8vdzT81H9N6wDt1885n8bqsRCmzw5oJI6fWrbhUH5W5Zz92vRUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABI4d8HySZSteyLYQAAAABJRU5ErkJggg==";
	var docHead = document.getElementsByTagName('head')[0];       
	var newLink = document.createElement('link');
	newLink.rel = 'shortcut icon';
	newLink.href = 'data:image/png;base64,'+favIcon;
	docHead.appendChild(newLink);
</script>



<script id="thingydata" >

var thingyEncryptedTest = "This is not encrypted";

var thingyData = [
{
    "id": "MainThingy",
    "thingy": "[js]thingyParse('_systemInfo')[/js][[Sample Image]] [[_systemInfo]][[Note 4]]{{#each model}}<div>Value: <b>{{id}}</b>: {{thingy}}</div>{{else}}<div>None</div>{{/each}}[[What is ThingyJS?]]",
    "about":"This is the main thingy that has been set to the homepage.",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"handlebars",
	"dataSource":'el.id === "Note 3" || el.id === "Note 2"',
	"ignoreIncludes":false,
	"sort":999,
    "tags": [],
	"homepage": true,
	"systemHeader": false,
	"thingyHeader": false,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "_systemInfo",
    "thingy": "<h1>System Information</h1>Number of thingies: [js]thingyData.length[/js] [js]thingyData.filter(function (el) {return (el.id === 'MainThingy');})[0].about[/js]",
    "about":"This thingy is the header that precedes the main content.",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":1000,
	"tags": [],
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "_systemHeader",
    "thingy": "<h1 style='margin-left:20px'><img width=\"48\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAFQCAYAAABQ/KCRAAALIklEQVR4nO3dP29b1x3G8edHGgkS2JCAFB2MBiAQIBlN/fHQLqb3FtLajQECkaOEvAF3bxGOpJba74BB+wLoKYP+emwnGR2yNACNBikQQDwdrNSKE9iRziWPLp/vZ7Ik3nN+8PX95lJSyBCsDIfDLUnbklqvfelM0rjf73+56JlQTpQeAIsxHA7vSRpEROdNj0spTSTt9vv9Z4uYC2URAAOj0WglpXQaEa1f8viU0llEtHu93ov5TobSGqUHwEI8/qUXvyRdPPbxfEbBTcIdwJLb399/cHFbf2UR0dnZ2Xla8Ui4QbgDWHKz2axb4ljUAwFYchGxXeJY1AMBWH6rhY5FDRAAwBgBWHIppbMSx6IeCMCSi4jTEseiHgjAkouIQYljUQ8EYMld/Bx/fI1Dx/wOwPIjAB66V/lloIvHduc1DG4OfhPQyHA4/GtEdN/0mJTS436//+mCRkJh3AEY6ff7n0ZE5+fuBlJKk4jocPEDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUVfkrAqWD9paisS1F6+JTnar3AGwknSo0lTSVNI7NoydVLl9ZANLx2j3NGgNxwQPzk3Sq5qwb6yfPqliukgCkw40VKZ1e+q8+gLlJZ1K0Y/PoRe5KFb0mYBpw8QOLEi1d76Xef7pS7gLpeO2BZo1JBbMAuIp0vh33T7/MWSL/DuCct5AGiohmN3eJ/ACECABQROrkrlDB9wCilb8GgKuL1dwVeGMQwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIzdev0Tw+FwS9K2pJYkRUTnzUvsVz8VgF9kNBqltzzkNKU0jYippHGv13ty+Yv/D8BwOLwnafD2Cx5AjbQj4oc/b49Go92UUrff7z+TLp4CjEajFUljLn5g6bUljS+u+ZcBSCkNIqJVcCgACxIRrZTSWJIa+/v7DyKiW3gmAAsUEZ3hcLjVSCltlx4GwOJFRJcAAL46DZ77A7ZW+UUgwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMBYQ9Jp6SEAFDFtSJqUngJAEZNGs9kclJ4CwOJFxKDx2WefPZdEBAAjKaXJzs7O0x++CfgopTQpORCAxUgpTSJiW5JuSVKv13sh6eFoNPpC0m7J4QDM1aDf7+/98MGPfgzY6/X2UkrtlNLjlNLZwkcDMA9TSeOI6PR6vb3LX4jclVNKKef4/f393BGy7OzsFN3/rb77h3T+rXT+H2k6kb75e+mJ3mzlgbTakd69+/LjOxtFx3mbuv/7i4isa/hW1u6Yv/c/efXn1Y706z9KZ3+S/vvPYiP9rPc+lj78/MZf8PgxfhOwbt7/RProz1LzdulJXmnefjkTF3/tEIA6eveu9NFfSk/xym8+f3XLj1ohAHV1Z+Pl8+3Sbm9Iv/pD6SlwTQSgzm7Chbd6AyKEayMAdXb7BjznXu2UngAZCECd3bpTegKe+9ccAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMBY1nuLS1I63EhVDILr2T/Ke3/5XDsb+0X3dxebR1nXMHcAgDECABgjAIAxAgAYIwCAMQIAGCMAgDECABgjAIAxAgAYIwCAMQIAGCMAgDECABgjAIAxXg8AqDFeDwDAtREAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCM3So9APL8+7sP9P35O8X2/+C9b/Ture+L7Y88BKDmvvrXb/X1t3eL7f/7j/+mu3e+LrY/8vAUADBGAABjBAAwRgAAY3wTsOY+eP+bovu/0+QnAHVGAGrudx9+VXoE1BhPAQBjBAAwRgAAYwQAMEYAAGP5AUg6rWAOAFeWprkrVHAHkCb5awC4upjkrpAfgGYaZK8B4Ooas+xrLzsAsX7yXIkIAAs2ifWTp7mLVPNNwIhHkiaVrAXgbSaStqtYKPvdgS9LB+tfKGK3yjUBXJLSIO4f71W1XKUBkKR0vHZPs9iV1JGiVfX6gJ80lWKixmxQxW3/ZZUHAIs1Go1Syf17vR7/hmqMXwQCjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwRAMAYAQCMEQDAGAEAjBEAwBgBAIwt3f/LnQ7aW4rG9qUXI+m86fH7RztZ++1s7GcdjzxzP39JpwpNJU0ljWPz6EnWhjfM0rw78MtXImoM9JYLHriSUPvSR9vpYGNXzVk31k+eFZupQkvxFCAdbqxoFmNx8WPeQm3NYpwON1ZKj1KFpQiAlAa8/iAWJ1qSxmVnqEbtA5CO1x5I0S09B+x00kF7q/QQuWofAJ1HJa+PDlxZNLulR8hV/wBENW+QAFxd6pSeIFf9A6BoFR4AtmK19AS5liAAAK6LAADGCABgjAAAxggAYIwAAMYIAGCMAADGav96AOlwI+UcH5tHWX8HufsjT+nzl7t/adwBAMYIAGCMAADGCABgjAAAxggAYIwAAMYIAGCMAADGCABgjAAAxggAYIwAAMYIAGCMAADGCABgjAAAxggAYIwAAMYIAGCMAADGCABgjAAAxggAYKz+AUg6zTh4WnZ/5Kng/GWtUcX+ZdU/AEqT6x8bGcdWsT/yVHH+ctaoYv+y6h+AZhpc+9jG7PrHVrE/8lRx/nLWqGL/wmofgFg/ea50rYtwEusnTwvujzxVnb+nkial9i+t9gGQJEU80tVO4kTSdsH9kWeiKs/fy7UmBfcvptbvbPq6dLD+hSJ23/ygNIj7x3vF9kee0udvjvuXsFQBkKR0vHZPs9iV1JGidfHZqRQTNWaDed+2/fz+yFP6/C1u/0VbugDUzWg0ynp/+l6vV/Qc1n1+d8vxPQAA10IAAGMEADBGAABjBAAwRgAAYwQAMEYAAGMEADBGAABjBAAwRgAAYwQAMEYAAGMEADBGAABjBAAwRgAAYwQAMEYAAGMEADBGAABjBAAwRgAAYwQAMEYAAGMEADBGAABjBAAwRgAAYwQAMMZ7s1csHbS3FI1tKVoXn+rMc7/YPCp6DtPhRprvBjpVaCppKmkcm0dP5rqfGQJQkXS8dk+zxkBzvuBft/QB+MmGOlVz1o31k2cL3XdJ8RSgAulwY0WzGGvBF7+lUFuzGKfDjZXSoywDAlCJNLh0y4+5i5akcdkZlgMByJSO1x5I0S09h6FOOmhvlR6i7ghArvPYLj2CrWh2S49QdwQgV4gAFJM6pSeoOwKQLVqFBzAWq6UnqDsCABgjALmSTkuP4CtNS09QdwQgW5qUnsBXTEpPUHcEIFczDUqPYKsx4+8+EwHIFOsnz5WIQAGTWD95WnqIuiMAVYh4JGlSeAonE4kfv1aBAFQgNo9exObRQ+4EFiClQWwePYzNoxelR1kGBKBCcf94T41ZW0qPpXRWep7lkaaSxmrMOnH/eK/0NMvkfy6GQGtWAirRAAAAAElFTkSuQmCC\" alt=\"RoboBear\"  style='margin-right:20px' />Thingy Notes</h1>",
    "about":"This thingy is the header that precedes the main content.",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":1000,
	"tags": [],
	"homepage": false,
	"systemHeader": true,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "_systemFooter",
    "thingy": "<div>System Footer Stuff</div>",
    "about":"This thingy is the footer that comes after the main content.",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":0,
	"tags": [],
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": true,
	"thingyFooter": false,
	"editModeOnly":true,
    "fields": {}
},
{
    "id": "_editorHeader",
    "thingy": "<div class=\"pure-menu pure-menu-open pure-menu-horizontal\"><ul> <li class=\"pure-menu-selected\"><a href=\"#MainThingy\">Home</a></li>\n<li><a href=\"#el.id=='_systemEdit'/model {'id':'Note 2'}\">Edit1</a></li> <li><a href=\"#el.id=='_systemEdit'/thingymodel Get Model\" title=\"Using a seperate thingy to get the model\">Edit2</a></li>\n        <li><a href=\"#el.id=='_systemEdit'/metamodel Note 2\" title=\"Using Metamodel\">Edit3</a></li>\n        <li><a href=\"#_delete/model {'id':'Note 100'}\" title=\"Using ID\">Delete</a></li>\n        <li><a href=\"#_systemEdit/model {'id':''}\">New</a></li>\n <li><a href=\"#_alert/model {'alert':'Hello'}/append\">Alert</a></li>\n        <li><a href=\"#_log/model {'log':'Logged'}/append\">Log</a></li>   <li><a href=\"#_systemDump/append\">Dump</a></li><li><a href=\"#_listAll\">List</a></li>  <li><a href=\"#_systemSave\">Save</a></li>   </ul></div>",
    "about":"This thingy is the header that precedes the main content.",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":999,
	"tags": [],
	"homepage": false,
	"systemHeader": true,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":true,
    "fields": {}
},
{
    "id": "_systemEditorSubHeader",
    "thingy": "<div style='text-align:right'><a href=\"#el.id=='_systemEdit'/model {'id':'[[_parentid]]'}\">Edit</a></div>",
    "about":"This thingy is the a header for each source thingy when in edit mode.",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":1000,
	"tags": [],
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": true,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":true,
    "fields": {}
},
{
    "id": "thingyCSS",
    "thingy": "<style>.thingy{background-color:#fff; padding:10px; margin:10px; border-radius: 6px; border:solid 2px #888;} body{background-color:#ddd;}</style>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":1000,
	"tags": [],
	"homepage": false,
	"systemHeader": true,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "_thingyHeader",
    "thingy": "<div class='thingy'>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"thingy",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":1,
	"tags": [],
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": true,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "_thingyFooter",
    "thingy": "</div>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"thingy",
    "dataSource":"",
	"ignoreIncludes":false,
    "sort":1,
	"tags": [],
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": true,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "Help",
    "thingy": "<h1>Help</h1><p>desc, asc thingy.</p>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":2,
    "tags": ["green","red"],
    "fields": {}
},
{
    "id": "Note1",
    "thingy": "<h1>Title</h1><p>My name is Nikolai</p>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":5,
    "tags": ["green","red"],
	"homepage": true,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false,
    "fields": {}
},
{
    "id": "Note 2",
    "thingy": "Kelly 3 [[Note 3]] [[Note 3]] [[Note 3]] https://www.google.com",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"thingy",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":3,
    "tags": ["green","red"],
	"homepage": true,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false,
    "fields": {"Var":"Val","Var2":"Val2"}
},
{
    "id": "Note 3",
    "thingy": "Jeff 4",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":4,
    "tags": ["red"],
    "fields": {}
},
{
    "id": "Note 4",
    "thingy": "**I am bold!**",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"markdown",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":5,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "Thingy 5",
    "thingy": "<br>---------------- FOOTER ---------------<br>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":5,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "_break",
    "thingy": "<br>",
    "about":"A simple line break",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":0,
    "tags": [],
    "fields": {}
},
{
    "id": "_listAll",
    "thingy": "All non-system thingies:<br>[[#el.id.substr(0, 1)!== '_'/altel id/linked title/header _break]]<br><br>All system thingies:<br>[[#el.id.substr(0, 1)=== '_'/altel id/linked title/header _break]]",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":0,
    "tags": [],
    "fields": {}
},
{
    "id": "Get Model",
    "thingy": "{'id':'Note 2'}",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":5,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "_systemEdit",
    "thingy": "[js]thingyDrawEdit('{{model.id}}')[/js]",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"handlebars",
    "dataSource":"",
	"ignoreIncludes":true,
	"sort":5,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "_delete",
    "thingy": "<$cript>thingyDelete('{{model.id}}')</$cript>",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"handlebars",
    "dataSource":"",
	"ignoreIncludes":true,
	"sort":5,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "_systemSave",
    "thingy": "This function has been hard coded for now.",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":0,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "_systemDump",
    "thingy": "[js]log(JSON.stringify(thingyData, null, '\t'))[/js]",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"html",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":0,
    "tags": ["green","blue"],
    "fields": {}
},
{
    "id": "_alert",
    "thingy": "[js]alert('{{model.alert}}')[/js]",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"handlebars",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":0,
    "tags": [],
    "fields": {}
},
{
    "id": "_log",
    "thingy": "[js]log('{{model.log}}')[/js]",
    "about":"",
    "parent":"",
    "created": "2014-07-30T18:17",
    "active": true,
    "format":"handlebars",
    "dataSource":"",
	"ignoreIncludes":false,
	"sort":0,
    "tags": [],
    "fields": {}
},
{
	"id": "What is ThingyJS?",
	"thingy": "## Welcome to ThingyJS\n\nThingyJS is a JavaScript framework for data storage, editing, presentation and sharing. \n\nEach unit of data is called a thingy. A thingy can be a shoe size, an eye colour, an html document, a markdown file, a password, a script, a contact, a formula, a weight, an age, a code snippet, a phone number, a statistic... just about anything as long as it can be saved as a string.\n\nUsing the power of JavaScript you can create advanced filtering to find and match one or many thingies that are then presented to you on screen.\n\nA number of thingies can be combined to create an entire page of information from simple lists to an entire website.\n\nThe perfect use is as a note taking app in which you can create advanced lists based on tags and naming conventions.\n\n### Saving your data\n\nThe whole of ThingyJS including your thingies are stored in a single html file. When you save ThingyJS you are creating an exact copy of the ThingyJS file + any new or changed thingies. This means that your thingies come with their own reader and editor built in. All you need is a modern browser to view, filter and edit your thingies.\n\nThingyJS is an html file but it works offline.\n\n### Filters\n\n#### Quick Filters\n\n> \\#[thingyid]/[optional attributes]\n\nQuick link to a thingy.\n\n> \\#THINGYID\n\n### Filter Attributes\n\n#### Titles\n\n> \\#[thingy id]/title [optional title]\n\nAdds a title to each thingy found.\n> \\#THINGYID/title\n\nUses the thingy ID as a title.\n\n> \\#THINGYID/title SOME TITLE\n\nUses \"Some Title\" as the title.",
	"about":"",
	"parent": "",
	"created": "2014-07-30T18:17",
	"active": "true",
	"format": "markdown",
	"datasource": "",
	"ignoreIncludes": "false",
	"sort":0,
    "tags": [],
    "fields": {}
},
{
	"id": "Sample Image",
	"thingy": "<img width=\"24\" src=\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><linearGradient id='gradient'><stop offset='10%' stop-color='#F00'/><stop offset='90%' stop-color='#fcc'/> </linearGradient><rect fill='url(#gradient)' x='0' y='0' width='100%' height='100%'/></svg>\" alt=\"Red dot\" />",
	"about":"",
	"parent": "",
	"created": "2014-07-30T18:17",
	"active": true,
	"format": "html",
	"datasource": "",
	"ignoreIncludes": "false",
	"sort":0,
    "tags": [],
    "fields": {},
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false
},
{
	"id": "_PureCSS",
	"thingy": "<style>/*! Pure v0.5.0 Copyright 2014 Yahoo! Inc. All rights reserved. Licensed under the BSD License. https://github.com/yui/pure/blob/master/LICENSE.md*//*! normalize.css v1.1.3 | MIT License | git.io/normalize Copyright (c) Nicolas Gallagher and Jonathan Neal *//*! normalize.css v1.1.3 | MIT License | git.io/normalize */article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none;height:0}[hidden]{display:none}html{font-size:100%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}html,button,input,select,textarea{font-family:sans-serif}body{margin:0}a:focus{outline:thin dotted}a:active,a:hover{outline:0}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em;margin:.83em 0}h3{font-size:1.17em;margin:1em 0}h4{font-size:1em;margin:1.33em 0}h5{font-size:.83em;margin:1.67em 0}h6{font-size:.67em;margin:2.33em 0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}blockquote{margin:1em 40px}dfn{font-style:italic}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}mark{background:#ff0;color:#000}p,pre{margin:1em 0}code,kbd,pre,samp{font-family:monospace,serif;_font-family:'courier new',monospace;font-size:1em}pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}q{quotes:none}q:before,q:after{content:'';content:none}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}dl,menu,ol,ul{margin:1em 0}dd{margin:0 0 0 40px}menu,ol,ul{padding:0 0 0 40px}nav ul,nav ol{list-style:none;list-style-image:none}img{border:0;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}figure{margin:0}form{margin:0}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0;white-space:normal;*margin-left:-7px}button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle}button,input{line-height:normal}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer;*overflow:visible}button[disabled],html input[disabled]{cursor:default}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}input[type=search]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}[hidden]{display:none!important}.pure-img{max-width:100%;height:auto;display:block}.pure-g{letter-spacing:-.31em;*letter-spacing:normal;*word-spacing:-.43em;text-rendering:optimizespeed;font-family:FreeSans,Arimo,'Droid Sans',Helvetica,Arial,sans-serif;display:-webkit-flex;-webkit-flex-flow:row wrap;display:-ms-flexbox;-ms-flex-flow:row wrap}.opera-only :-o-prefocus,.pure-g{word-spacing:-.43em}.pure-u{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-g [class *='pure-u']{font-family:sans-serif}.pure-u-1,.pure-u-1-1,.pure-u-1-2,.pure-u-1-3,.pure-u-2-3,.pure-u-1-4,.pure-u-3-4,.pure-u-1-5,.pure-u-2-5,.pure-u-3-5,.pure-u-4-5,.pure-u-5-5,.pure-u-1-6,.pure-u-5-6,.pure-u-1-8,.pure-u-3-8,.pure-u-5-8,.pure-u-7-8,.pure-u-1-12,.pure-u-5-12,.pure-u-7-12,.pure-u-11-12,.pure-u-1-24,.pure-u-2-24,.pure-u-3-24,.pure-u-4-24,.pure-u-5-24,.pure-u-6-24,.pure-u-7-24,.pure-u-8-24,.pure-u-9-24,.pure-u-10-24,.pure-u-11-24,.pure-u-12-24,.pure-u-13-24,.pure-u-14-24,.pure-u-15-24,.pure-u-16-24,.pure-u-17-24,.pure-u-18-24,.pure-u-19-24,.pure-u-20-24,.pure-u-21-24,.pure-u-22-24,.pure-u-23-24,.pure-u-24-24{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-1-24{width:4.1667%;*width:4.1357%}.pure-u-1-12,.pure-u-2-24{width:8.3333%;*width:8.3023%}.pure-u-1-8,.pure-u-3-24{width:12.5%;*width:12.469%}.pure-u-1-6,.pure-u-4-24{width:16.6667%;*width:16.6357%}.pure-u-1-5{width:20%;*width:19.969%}.pure-u-5-24{width:20.8333%;*width:20.8023%}.pure-u-1-4,.pure-u-6-24{width:25%;*width:24.969%}.pure-u-7-24{width:29.1667%;*width:29.1357%}.pure-u-1-3,.pure-u-8-24{width:33.3333%;*width:33.3023%}.pure-u-3-8,.pure-u-9-24{width:37.5%;*width:37.469%}.pure-u-2-5{width:40%;*width:39.969%}.pure-u-5-12,.pure-u-10-24{width:41.6667%;*width:41.6357%}.pure-u-11-24{width:45.8333%;*width:45.8023%}.pure-u-1-2,.pure-u-12-24{width:50%;*width:49.969%}.pure-u-13-24{width:54.1667%;*width:54.1357%}.pure-u-7-12,.pure-u-14-24{width:58.3333%;*width:58.3023%}.pure-u-3-5{width:60%;*width:59.969%}.pure-u-5-8,.pure-u-15-24{width:62.5%;*width:62.469%}.pure-u-2-3,.pure-u-16-24{width:66.6667%;*width:66.6357%}.pure-u-17-24{width:70.8333%;*width:70.8023%}.pure-u-3-4,.pure-u-18-24{width:75%;*width:74.969%}.pure-u-19-24{width:79.1667%;*width:79.1357%}.pure-u-4-5{width:80%;*width:79.969%}.pure-u-5-6,.pure-u-20-24{width:83.3333%;*width:83.3023%}.pure-u-7-8,.pure-u-21-24{width:87.5%;*width:87.469%}.pure-u-11-12,.pure-u-22-24{width:91.6667%;*width:91.6357%}.pure-u-23-24{width:95.8333%;*width:95.8023%}.pure-u-1,.pure-u-1-1,.pure-u-5-5,.pure-u-24-24{width:100%}.pure-button{display:inline-block;*display:inline;zoom:1;line-height:normal;white-space:nowrap;vertical-align:baseline;text-align:center;cursor:pointer;-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pure-button::-moz-focus-inner{padding:0;border:0}.pure-button{font-family:inherit;font-size:100%;*font-size:90%;*overflow:visible;padding:.5em 1em;color:#444;color:rgba(0,0,0,.8);*color:#444;border:1px solid #999;border:0 rgba(0,0,0,0);background-color:#E6E6E6;text-decoration:none;border-radius:2px}.pure-button-hover,.pure-button:hover,.pure-button:focus{filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#1a000000', GradientType=0);background-image:-webkit-gradient(linear,0 0,0 100%,from(transparent),color-stop(40%,rgba(0,0,0,.05)),to(rgba(0,0,0,.1)));background-image:-webkit-linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1));background-image:-moz-linear-gradient(top,rgba(0,0,0,.05) 0,rgba(0,0,0,.1));background-image:-o-linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1));background-image:linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1))}.pure-button:focus{outline:0}.pure-button-active,.pure-button:active{box-shadow:0 0 0 1px rgba(0,0,0,.15) inset,0 0 6px rgba(0,0,0,.2) inset}.pure-button[disabled],.pure-button-disabled,.pure-button-disabled:hover,.pure-button-disabled:focus,.pure-button-disabled:active{border:0;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);filter:alpha(opacity=40);-khtml-opacity:.4;-moz-opacity:.4;opacity:.4;cursor:not-allowed;box-shadow:none}.pure-button-hidden{display:none}.pure-button::-moz-focus-inner{padding:0;border:0}.pure-button-primary,.pure-button-selected,a.pure-button-primary,a.pure-button-selected{background-color:#0078e7;color:#fff}.pure-form input[type=text],.pure-form input[type=password],.pure-form input[type=email],.pure-form input[type=url],.pure-form input[type=date],.pure-form input[type=month],.pure-form input[type=time],.pure-form input[type=datetime],.pure-form input[type=datetime-local],.pure-form input[type=week],.pure-form input[type=number],.pure-form input[type=search],.pure-form input[type=tel],.pure-form input[type=color],.pure-form select,.pure-form textarea{padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.pure-form input:not([type]){padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.pure-form input[type=color]{padding:.2em .5em}.pure-form input[type=text]:focus,.pure-form input[type=password]:focus,.pure-form input[type=email]:focus,.pure-form input[type=url]:focus,.pure-form input[type=date]:focus,.pure-form input[type=month]:focus,.pure-form input[type=time]:focus,.pure-form input[type=datetime]:focus,.pure-form input[type=datetime-local]:focus,.pure-form input[type=week]:focus,.pure-form input[type=number]:focus,.pure-form input[type=search]:focus,.pure-form input[type=tel]:focus,.pure-form input[type=color]:focus,.pure-form select:focus,.pure-form textarea:focus{outline:0;outline:thin dotted \9;border-color:#129FEA}.pure-form input:not([type]):focus{outline:0;outline:thin dotted \9;border-color:#129FEA}.pure-form input[type=file]:focus,.pure-form input[type=radio]:focus,.pure-form input[type=checkbox]:focus{outline:thin dotted #333;outline:1px auto #129FEA}.pure-form .pure-checkbox,.pure-form .pure-radio{margin:.5em 0;display:block}.pure-form input[type=text][disabled],.pure-form input[type=password][disabled],.pure-form input[type=email][disabled],.pure-form input[type=url][disabled],.pure-form input[type=date][disabled],.pure-form input[type=month][disabled],.pure-form input[type=time][disabled],.pure-form input[type=datetime][disabled],.pure-form input[type=datetime-local][disabled],.pure-form input[type=week][disabled],.pure-form input[type=number][disabled],.pure-form input[type=search][disabled],.pure-form input[type=tel][disabled],.pure-form input[type=color][disabled],.pure-form select[disabled],.pure-form textarea[disabled]{cursor:not-allowed;background-color:#eaeded;color:#cad2d3}.pure-form input:not([type])[disabled]{cursor:not-allowed;background-color:#eaeded;color:#cad2d3}.pure-form input[readonly],.pure-form select[readonly],.pure-form textarea[readonly]{background:#eee;color:#777;border-color:#ccc}.pure-form input:focus:invalid,.pure-form textarea:focus:invalid,.pure-form select:focus:invalid{color:#b94a48;border-color:#ee5f5b}.pure-form input:focus:invalid:focus,.pure-form textarea:focus:invalid:focus,.pure-form select:focus:invalid:focus{border-color:#e9322d}.pure-form input[type=file]:focus:invalid:focus,.pure-form input[type=radio]:focus:invalid:focus,.pure-form input[type=checkbox]:focus:invalid:focus{outline-color:#e9322d}.pure-form select{border:1px solid #ccc;background-color:#fff}.pure-form select[multiple]{height:auto}.pure-form label{margin:.5em 0 .2em}.pure-form fieldset{margin:0;padding:.35em 0 .75em;border:0}.pure-form legend{display:block;width:100%;padding:.3em 0;margin-bottom:.3em;color:#333;border-bottom:1px solid #e5e5e5}.pure-form-stacked input[type=text],.pure-form-stacked input[type=password],.pure-form-stacked input[type=email],.pure-form-stacked input[type=url],.pure-form-stacked input[type=date],.pure-form-stacked input[type=month],.pure-form-stacked input[type=time],.pure-form-stacked input[type=datetime],.pure-form-stacked input[type=datetime-local],.pure-form-stacked input[type=week],.pure-form-stacked input[type=number],.pure-form-stacked input[type=search],.pure-form-stacked input[type=tel],.pure-form-stacked input[type=color],.pure-form-stacked select,.pure-form-stacked label,.pure-form-stacked textarea{display:block;margin:.25em 0}.pure-form-stacked input:not([type]){display:block;margin:.25em 0}.pure-form-aligned input,.pure-form-aligned textarea,.pure-form-aligned select,.pure-form-aligned .pure-help-inline,.pure-form-message-inline{display:inline-block;*display:inline;*zoom:1;vertical-align:middle}.pure-form-aligned textarea{vertical-align:top}.pure-form-aligned .pure-control-group{margin-bottom:.5em}.pure-form-aligned .pure-control-group label{text-align:right;display:inline-block;vertical-align:middle;width:10em;margin:0 1em 0 0}.pure-form-aligned .pure-controls{margin:1.5em 0 0 10em}.pure-form input.pure-input-rounded,.pure-form .pure-input-rounded{border-radius:2em;padding:.5em 1em}.pure-form .pure-group fieldset{margin-bottom:10px}.pure-form .pure-group input{display:block;padding:10px;margin:0;border-radius:0;position:relative;top:-1px}.pure-form .pure-group input:focus{z-index:2}.pure-form .pure-group input:first-child{top:1px;border-radius:4px 4px 0 0}.pure-form .pure-group input:last-child{top:-2px;border-radius:0 0 4px 4px}.pure-form .pure-group button{margin:.35em 0}.pure-form .pure-input-1{width:100%}.pure-form .pure-input-2-3{width:66%}.pure-form .pure-input-1-2{width:50%}.pure-form .pure-input-1-3{width:33%}.pure-form .pure-input-1-4{width:25%}.pure-form .pure-help-inline,.pure-form-message-inline{display:inline-block;padding-left:.3em;color:#666;vertical-align:middle;font-size:.875em}.pure-form-message{display:block;color:#666;font-size:.875em}@media only screen and (max-width :480px){.pure-form button[type=submit]{margin:.7em 0 0}.pure-form input:not([type]),.pure-form input[type=text],.pure-form input[type=password],.pure-form input[type=email],.pure-form input[type=url],.pure-form input[type=date],.pure-form input[type=month],.pure-form input[type=time],.pure-form input[type=datetime],.pure-form input[type=datetime-local],.pure-form input[type=week],.pure-form input[type=number],.pure-form input[type=search],.pure-form input[type=tel],.pure-form input[type=color],.pure-form label{margin-bottom:.3em;display:block}.pure-group input:not([type]),.pure-group input[type=text],.pure-group input[type=password],.pure-group input[type=email],.pure-group input[type=url],.pure-group input[type=date],.pure-group input[type=month],.pure-group input[type=time],.pure-group input[type=datetime],.pure-group input[type=datetime-local],.pure-group input[type=week],.pure-group input[type=number],.pure-group input[type=search],.pure-group input[type=tel],.pure-group input[type=color]{margin-bottom:0}.pure-form-aligned .pure-control-group label{margin-bottom:.3em;text-align:left;display:block;width:100%}.pure-form-aligned .pure-controls{margin:1.5em 0 0}.pure-form .pure-help-inline,.pure-form-message-inline,.pure-form-message{display:block;font-size:.75em;padding:.2em 0 .8em}}.pure-menu ul{position:absolute;visibility:hidden}.pure-menu.pure-menu-open{visibility:visible;z-index:2;width:100%}.pure-menu ul{left:-10000px;list-style:none;margin:0;padding:0;top:-10000px;z-index:1}.pure-menu>ul{position:relative}.pure-menu-open>ul{left:0;top:0;visibility:visible}.pure-menu-open>ul:focus{outline:0}.pure-menu li{position:relative}.pure-menu a,.pure-menu .pure-menu-heading{display:block;color:inherit;line-height:1.5em;padding:5px 20px;text-decoration:none;white-space:nowrap}.pure-menu.pure-menu-horizontal>.pure-menu-heading{display:inline-block;*display:inline;zoom:1;margin:0;vertical-align:middle}.pure-menu.pure-menu-horizontal>ul{display:inline-block;*display:inline;zoom:1;vertical-align:middle}.pure-menu li a{padding:5px 20px}.pure-menu-can-have-children>.pure-menu-label:after{content:'\25B8';float:right;font-family:'Lucida Grande','Lucida Sans Unicode','DejaVu Sans',sans-serif;margin-right:-20px;margin-top:-1px}.pure-menu-can-have-children>.pure-menu-label{padding-right:30px}.pure-menu-separator{background-color:#dfdfdf;display:block;height:1px;font-size:0;margin:7px 2px;overflow:hidden}.pure-menu-hidden{display:none}.pure-menu-fixed{position:fixed;top:0;left:0;width:100%}.pure-menu-horizontal li{display:inline-block;*display:inline;zoom:1;vertical-align:middle}.pure-menu-horizontal li li{display:block}.pure-menu-horizontal>.pure-menu-children>.pure-menu-can-have-children>.pure-menu-label:after{content:'\25BE'}.pure-menu-horizontal>.pure-menu-children>.pure-menu-can-have-children>.pure-menu-label{padding-right:30px}.pure-menu-horizontal li.pure-menu-separator{height:50%;width:1px;margin:0 7px}.pure-menu-horizontal li li.pure-menu-separator{height:1px;width:auto;margin:7px 2px}.pure-menu.pure-menu-open,.pure-menu.pure-menu-horizontal li .pure-menu-children{background:#fff;border:1px solid #b7b7b7}.pure-menu.pure-menu-horizontal,.pure-menu.pure-menu-horizontal .pure-menu-heading{border:0}.pure-menu a{border:1px solid transparent;border-left:0;border-right:0}.pure-menu a,.pure-menu .pure-menu-can-have-children>li:after{color:#777}.pure-menu .pure-menu-can-have-children>li:hover:after{color:#fff}.pure-menu .pure-menu-open{background:#dedede}.pure-menu li a:hover,.pure-menu li a:focus{background:#eee}.pure-menu li.pure-menu-disabled a:hover,.pure-menu li.pure-menu-disabled a:focus{background:#fff;color:#bfbfbf}.pure-menu .pure-menu-disabled>a{background-image:none;border-color:transparent;cursor:default}.pure-menu .pure-menu-disabled>a,.pure-menu .pure-menu-can-have-children.pure-menu-disabled>a:after{color:#bfbfbf}.pure-menu .pure-menu-heading{color:#565d64;text-transform:uppercase;font-size:90%;margin-top:.5em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#dfdfdf}.pure-menu .pure-menu-selected a{color:#000}.pure-menu.pure-menu-open.pure-menu-fixed{border:0;border-bottom:1px solid #b7b7b7}.pure-paginator{letter-spacing:-.31em;*letter-spacing:normal;*word-spacing:-.43em;text-rendering:optimizespeed;list-style:none;margin:0;padding:0}.opera-only :-o-prefocus,.pure-paginator{word-spacing:-.43em}.pure-paginator li{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-paginator .pure-button{border-radius:0;padding:.8em 1.4em;vertical-align:top;height:1.1em}.pure-paginator .pure-button:focus,.pure-paginator .pure-button:active{outline-style:none}.pure-paginator .prev,.pure-paginator .next{color:#C0C1C3;text-shadow:0 -1px 0 rgba(0,0,0,.45)}.pure-paginator .prev{border-radius:2px 0 0 2px}.pure-paginator .next{border-radius:0 2px 2px 0}@media (max-width:480px){.pure-menu-horizontal{width:100%}.pure-menu-children li{display:block;border-bottom:1px solid #000}}.pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table td:first-child,.pure-table th:first-child{border-left-width:0}.pure-table thead{background:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td{background-color:#f2f2f2}.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child td,.pure-table-horizontal tbody>tr:last-child td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child td{border-bottom-width:0}</style>",
	"about": "Pure is a simple and lightweight css framework. https://github.com/yui/pure/blob/master/LICENSE.md",
	"parent": "",
	"created": "2014-07-30T18:17",
	"active": true,
	"format": "html",
	"dataSource": "",
	"ignoreIncludes": "false",
	"sort":1000,
    "tags": [],
    "fields": {},
	"homepage": false,
	"systemHeader": true,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false
},
{
	"id": "_beforeUnloadWarning",
	"thingy": "You have unsaved thingies. Are you sure you want to leave?",
	"about": "If thingies have changed or been created, this is the warning if the user tries to leave ThingyJS or reload before saving.",
	"parent": "",
	"created": "2014-07-30T18:17",
	"active": true,
	"format": "thingy",
	"dataSource": "",
	"ignoreIncludes": "false",
	"sort": 1000,
	"tags": [],
    "fields": {},
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false
},
{
	"id": "_thingyjsSettings",
	"thingy": "'thingyUsePassword':true,'thingyMode':'editmode'",
	"about": "These are the thingyJS settings.",
	"parent": "",
	"created": "2014-07-30T18:17",
	"active": false,
	"format": "thingy",
	"dataSource": "",
	"ignoreIncludes": "false",
	"sort": 0,
	"tags": [],
    "fields": {},
	"homepage": false,
	"systemHeader": false,
	"thingyHeader": false,
	"systemFooter": false,
	"thingyFooter": false,
	"editModeOnly":false
}

];

//thingyData = "LgBzFpnT6VMTZ7gS6UcT0jLkiqNl"; // password: ccc

</script>




<script>

(function(){
	
	/*
	var password = prompt("Password", "");
	encoded = Aes.Ctr.encrypt("Hello : World", password, 256);
	decoded = Aes.Ctr.decrypt(encoded, password, 256);
	console.log(encoded);
	*/
	
    /*
    Can be used to keep notes, create templates that populate from notes, can traverse via url, can query via url
    Whole pages can be created using templates, css and notes
	Uses handlebarsJS

    DEV NOTES:
        For alerts use _systemAlert
            thingyUpdateScreen("_systemAlert/model {'alert':'The Message Goes Here'}/append");

        For console.log use log()
	
	TODO: 
        <$script> or [script]? | [js] or [tscript]?
		Limit number of recursive self calling thingies to 500 or ban them
		Add math formulas
		Make the save function its own function
		What happens if there are 0 thingies? Encryption
		
    */

// TODO: This is a comment.



$(document).on('click', ".thingybutton", function(){ 
	var thingyAction = $(this).attr("data-thingy");
	thingyAction = thingyAction.substr(0, 4);
	if(thingyAction === "save"){
		thingySaveThingy(this);
	}
	
	return;
});

thingySaveThingy = function(e){
	
	var oldid = $(e).attr("data-thingy");
	oldid = oldid.substr(5, oldid.length);
	oldid = $.trim(oldid);
	
	// Make sure we have a proper ID
	$("#editid").val($.trim($("#editid").val()));
	$("#editid").val($("#editid").val().replace(/\s{2,}/g,' ')); // trim multiple white space in string
	if(!$("#editid").val()){
		thingyUpdateScreen("_alert/model {'alert':'Missing ID. Alphanumeric and spaces only.'}/append");
		return;
	}
	// Check characters in sting. Alphanumeric, $ and spaces allowed
	var reg = /^[A-Za-z-_\d\s\$\?\!]+$/;
    if(!reg.test($("#editid").val())){
		thingyUpdateScreen("_alert/model {'alert':'Bad ID. Alphanumeric, spaces, !, $, ? only.'}/append");
		return;
	}
	// Make sure the new ID does not conflict with a current one
	for(var i=0; i < thingyData.length; i++){
		if(thingyData[i].id === $("#editid").val() && thingyData[i].id !== oldid){
			thingyUpdateScreen("_alert/model {'alert':'ID in use. Another thingy already has this ID.'}/append");
			return;
		}
	}
	
	if(!oldid){
		// This is a new thingy so make it and call oldid by the new name
		thingyData.push({});
		var n = thingyData.length-1;
		thingyData[n].id = $("#editid").val();
		oldid = $("#editid").val();
	}
	
	for(var i=0; i < thingyData.length; i++){
		if(thingyData[i].id === oldid){
			
			if($('#edittags').val() === ""){$('#edittags').val("[]")}
			if($('#editfields').val() === ""){$('#editfields').val("{}")}
			
			thingyData[i].id = $("#editid").val();
			thingyData[i].thingy = thingyTo$criptTag($('#editthingy').val());
			thingyData[i].parent = $('#editparent').val();
			thingyData[i].about = $('#editabout').val();
			if($('#editactive').val() === "true"){thingyData[i].active = true;}else{thingyData[i].active = false;}
			thingyData[i].format = $('#editformat').val();
			thingyData[i].dataSource = $('#editdatasource').val();
			if($('#editignoreincludes').val() === "true"){thingyData[i].ignoreIncludes = true;}else{thingyData[i].ignoreIncludes = false;}
			thingyData[i].sort = Number($('#editsort').val());
			thingyData[i].tags = eval($('#edittags').val());
			thingyData[i].fields = JSON.parse($('#editfields').val());
			thingyData[i].created = $('#editcreated').val();
			
			if($('#edithomepage').val() === "true"){thingyData[i].homepage = true;}else{thingyData[i].homepage = false;}
			if($('#editsystemheader').val() === "true"){thingyData[i].systemHeader = true;}else{thingyData[i].systemHeader = false;}
			if($('#editthingyheader').val() === "true"){thingyData[i].thingyHeader = true;}else{thingyData[i].thingyHeader = false;}
			if($('#editeditmodeonly').val() === "true"){thingyData[i].editModeOnly = true;}else{thingyData[i].editModeOnly = false;}
			if($('#editsystemfooter').val() === "true"){thingyData[i].systemFooter = true;}else{thingyData[i].systemFooter = false;}
			if($('#editthingyfooter').val() === "true"){thingyData[i].thingyFooter = true;}else{thingyData[i].thingyFooter = false;}
			
			break;
		}
	}
	
	// Bind the beforeunload binding warning
	$(window).bind('beforeunload', saveBeforeUnloadHandler);
	
	window.location.hash="#"+$('#editid').val();
	
}



thingyClosureCompare = function(obj, sort) {
	
	if(!sort || sort === ""){sort = ["desc", "thingy"]}
	if(!sort[0] || sort[0] === ""){sort[0] = "desc"}
	if(!sort[1] || sort[1] === ""){sort[1] = "thingy"}
	var sn = sort[1];
	
	var naturalSorter = function(as, bs){
		var a, b, a1, b1, i= 0, n, L,
		rx=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;
		if(as[sn].toString()=== bs[sn].toString()) return 0;
		a= as[sn].toString().toLowerCase().match(rx);
		b= bs[sn].toString().toLowerCase().match(rx);
		L= a.length;
		while(i<L){
			if(!b[i]) return 1;
			a1= a[i],
			b1= b[i++];
			if(a1!== b1){
				n= a1-b1;
				if(!isNaN(n)) return n;
				return a1>b1? 1:-1;
			}
		}
		return b[i]? -1:0;
	}
	
	obj.sort(naturalSorter);
	
	if(sort[0] === "desc"){
		obj.reverse();
	}
	return obj;
}


var thingyClosureFilter = function(arr, filter, sort){
	//alert(arr + " | " + filter + " | " + sort);
	// Quick thingy filter - link straight to single thingy - Exampel: [[thingy name]]
	if(filter.substr(0, 3)!== "el."){
		filter = "el.id === '" + filter + "'";
	}
	
    var func = function(el) {
        return eval(filter);
    }
    
	var obj = arr.filter(func);

	obj = thingyClosureCompare(obj,sort);
	return obj;
}

/*
var batKicks = thingyData.filter(function (el) {return (el.id === "MainThingy");})[0].id;
alert(batKicks);
*/

function thingyTools(thingy,id){
	
	
	return thingy;
}

/*
thingyParse(id, hashModel, altel, linked)
This takes an individual thingy and returns the html to be inserted into the model.
*/

function thingyParse(id, hashModel, altel, linked, keys){
	// linked is when for example you only show the id of a thingy and want that id to link to the full thingy.
	// keys look like this: {"_parentid":"value"}
	
	//alert(id + " | " + linked);
	
	var filter = "el.id === '" + id + "'";
	var row = thingyClosureFilter(thingyData, filter, "");
	row = row[0];
	
	if(!row){
		log("Error: thingyParse() Missing thingy row.");
		return false;
	}
	
	var res = "";
	var thingy = "";
	
	if(altel){ 
		thingy = row[altel]; // Alternative element for the thingy result (often just the ID)
	}else{
		//if(row.hasOwnProperty('thingy')){
			thingy = row.thingy; // Return the standard thingy - default
		//}else{
		//	log("Error: thingyParse() Missing thingy property.");
		//	return false;
		//}
	}
	
	if(linked){
		if(linked === "_$LINKED$_"){
			thingy = "<a href='#" + id + "'>" + thingy + "</a>";
		}else{
			thingy = "<a href='#" + id + "/" + linked + "'>" + thingy + "</a>";
		}
	}
	
	// If an alternative element was used for the thingy, there is no need to continue. 99 out of 100 this will just be the ID of the thingy.
	if(altel){
		return thingy;
	}
	
    var format = row.format;
	var ignoreIncludes = row.ignoreIncludes;
	var dataSource = row.dataSource;
	
	
	
	if(format === "none"){
		return thingy;
	}else if(format === "" || format === "thingy"){
		if(!ignoreIncludes){thingy = thingyIncludeFilters(thingy, keys)} // Find and fill in internal thingy filters
		thingy = thingyFormatting(thingy);
		thingy = thingyLinks(thingy);
		thingy = thingyAutoLinks(thingy);
		thingy = thingyScripts(thingy); // Run internal scripts. [js][/js]
		thingy = thingyToScriptTag(thingy);
		return thingy;
	}else if(format === "html"){
		if(!ignoreIncludes){thingy = thingyIncludeFilters(thingy, keys);} // Find and fill in internal thingy filters
		thingy = thingyScripts(thingy); // Run internal scripts. [js][/js]
		thingy = thingyToScriptTag(thingy);
		return thingy;
	}else if(format === "markdown"){
		if(!ignoreIncludes){thingy = thingyIncludeFilters(thingy, keys);} // Find and fill in internal thingy filters
		var converter = new Markdown.Converter();
		thingy = converter.makeHtml(thingy);
		thingy = thingyScripts(thingy); // Run internal scripts. [js][/js]
		thingy = thingyToScriptTag(thingy);
		return thingy;
	}else if(format === "handlebars"){
		if(!ignoreIncludes){thingy = thingyIncludeFilters(thingy, keys)} // Find and fill in internal thingy filters
        var template = Handlebars.compile(thingy);
        
		var model = {};
		
		if(hashModel){
			model = hashModel;
		}else if(dataSource){
			model = thingyClosureFilter(thingyData, dataSource);
			model = JSON.stringify(model);
		}
		
		
		if(typeof model === "object"){
			log("ERROR: thingyParse() | model is an object but should be a string.");
			return false;
		}
		
		model = "{'model':"+model+"}";
		
		model = eval("(" + model + ")");
		
		thingy = template(model) ;
		
		thingy = thingyScripts(thingy); // Run internal scripts. [js][/js]
		thingy = thingyToScriptTag(thingy);
		return thingy;
    }
	
    return false;
}


function thingyTo$criptTag(thingy){
	
	var cnt = 0;
	while(thingy.search(/<script>/) >-1 && cnt < 1000){
		thingy = thingy.replace("<"+"script>", "<$cript>");
		cnt++;
	}
	
	var cnt = 0;
	while(thingy.search(/<\/script>/) >-1 && cnt < 1000){
		thingy = thingy.replace("</"+"script>", "</$cript>");
		cnt++;
	}
	return thingy;
}

function thingyToScriptTag(thingy){
	
	var cnt = 0;
	while(thingy.search(/<\$cript>/) >-1 && cnt < 1000){
		thingy = thingy.replace("<$cript>", "<"+"script>");
		cnt++;
	}
	
	var cnt = 0;
	while(thingy.search(/<\/\$cript>/) >-1 && cnt < 1000){
		thingy = thingy.replace("</$cript>", "</"+"script>");
		cnt++;
	}
	return thingy;
}

function thingyFormatting(thingy){
	// replace new lines with <br>
	thingy = thingy.replace(/(?:\r\n|\r|\n)/g, '<br>');
	return thingy;
}

function thingyLinks(thingy){
	var cnt = 0;
	while(thingy.search(/\[.*\]/) >-1 && cnt < 10000){
		
		var ff1 = thingy.split("[");
		var ff2 = ff1[1].split("]");
		var fullId = ff2[0];
		var id = $.trim(fullId);
		
		id = "<a href='#"+id+"'>"+id+"</a>";
		
		thingy = thingy.replace("[" + fullId + "]", id);
		
		
		cnt++;	
	}
	return thingy;
}


function thingyScripts(thingy){
	
	var cnt = 0;
	//while(thingy.search(/[js].*[\/js]/) >-1 && cnt <= 1000){
	while(thingy.search(/\[js\].*\[\/js\]/) >-1 && cnt <= 1000){
		
		var ff1 = thingy.split("[js]");
		var ff2 = ff1[1].split("[/js]");
		var fullFilter = ff2[0];
		var filter = $.trim(fullFilter);
		var fill = "";
		
		if(!fill){
			fill = eval(filter);
		}
		if(fill){
			thingy = thingy.replace("[js]" + fullFilter + "[/js]", fill);
		}else{
			thingy = thingy.replace("[js]" + fullFilter + "[/js]", "");
		}
		
		cnt++;	
	}
	
	if(cnt >= 1000){log("WARNING: thingyScripts() probably had to break out of an infinite loop.");}
	
	return thingy;
}

// Find and fill in internal thingy filters
function thingyIncludeFilters(thingy, keys){	
	var cnt = 0;
	while(thingy.search(/\[\[.*\]\]/) >-1 && cnt <= 1000){
		
		var ff1 = thingy.split("[[");
		var ff2 = ff1[1].split("]]");
		var fullFilter = ff2[0];
		var filter = $.trim(fullFilter);
		var fill = "";
		
		// look for key pair values that match includes. These might be "_parentid" for example. Great for inserting an ID into an include.
		if(keys){
			for (var prop in keys) {
				
				if(filter === prop){
					fill = keys[prop];
					break;
				}
			}
		}
		
		if(!fill){
			fill = thingyHashChange(filter,true);
		}
		
		thingy = thingy.replace("[[" + fullFilter + "]]", fill);
		
		cnt++;	
	}
	
	if(cnt >= 1000){log("WARNING: thingyIncludeFilters() probably had to break out of an infinite loop.");}
	
	return thingy;
}

function thingyAutoLinks(thingy){
	var res = Autolinker.link( thingy, { stripPrefix : false, newWindow: false });
	return res;
}



//thingyParseObject(filter, attrs)
//This takes the filter and attributes and returns the full result to be entered into the dom
function thingyParseObject(filter, attrs, include, level, section){
	
	var sort = [];
	var header = "";
	var footer = "";
	var model = "";
	var append = false;
	var title = "_$NO TITLE$_";
	var altel = "";
	var linked = "";
	var nothingyheader = false; // ignore thingyheaders
	var nothingyfooter = false; // ignore thingyfooters
	
	
	for(var i = 0; i < attrs.length; i++){
		
		attrs[i] = $.trim(attrs[i]);
		attrs[i] = attrs[i].replace(/\s{2,}/g,' '); // trim multiple white space in string
		
		if(attrs[i].substr(0, 4) === "desc"){
			sort[0] = "desc"; sort[1] = $.trim(attrs[i].substr(5, attrs[i].length));
		}
		if(attrs[i].substr(0, 3) === "asc"){
			sort[0] = "asc"; sort[1] = $.trim(attrs[i].substr(4, attrs[i].length));
		}
		if(attrs[i].substr(0, 5) === "title"){
			title = attrs[i].substr(6, attrs[i].length);
			title = $.trim(title);
		}
		if(attrs[i].substr(0, 7) === "notitle"){
			title = "_$NO TITLE$_";
		}
		if(attrs[i].substr(0, 5) === "altel"){
			altel = $.trim(attrs[i].substr(6, attrs[i].length));
		}
		if(attrs[i].substr(0, 6) === "linked"){
			//linked = true;
			linked = attrs[i].substr(7, attrs[i].length);
			//log(filter + " :|: " + linked);
			
			linked = $.trim(linked);
			//log(attrs[i] + " | " + linked);
			if(linked === ""){linked = "_$LINKED$_"};
			//log(attrs[i] + " | " + linked);
		}
		if(attrs[i].substr(0, 6) === "append"){
			append = true;
		}
		if(attrs[i].substr(0, 8) === "noheader"){
			nothingyheader = true;
		}
		if(attrs[i].substr(0, 8) === "nofooter"){
			nothingyfooter = true;
		}
		if(attrs[i].substr(0, 6) === "header"){
			header = $.trim(attrs[i].substr(7, attrs[i].length));
		}
		if(attrs[i].substr(0, 6) === "footer"){
			footer = $.trim(attrs[i].substr(7, attrs[i].length));
		}
		if(attrs[i].substr(0, 5) === "model"){
			model = $.trim(attrs[i].substr(6, attrs[i].length));
		}
		if(attrs[i].substr(0, 11) === "thingymodel"){
			model = attrs[i].substr(12, attrs[i].length);
			model = thingyHashChange($.trim(model));
		}
		if(attrs[i].substr(0, 9) === "metamodel"){
			model = $.trim(attrs[i].substr(10, attrs[i].length));
			
			model = thingyData.filter(function(el){
				return el.id === model;
			});
			model = model[0];
			
			model = JSON.stringify(model);
		}
		//alert(JSON.stringify(model));
	}
	
	var row = thingyClosureFilter(thingyData, filter, sort);
	
	var tt = "";
	for(var i = 0; i < row.length; i++) {
		
		// Include thingy headers
		if(level === 1 && section === "tjs-filterresults" && nothingyheader === false){
			if(thingyMode === "editmode"){
				var r = thingyClosureFilter(thingyData, "el.thingyHeader===true", ["desc", "sort"]);
			}else{
				var r = thingyClosureFilter(thingyData, "el.thingyHeader===true && el.editModeOnly !== true", ["desc", "sort"]);
			}
			for(var n = 0; n < r.length; n++){
				tt += thingyParse(r[n].id,null,null,null,{"_parentid":row[i].id});
			}
		}
		
		// Add headers from the hash attributes
		if(header){
			tt += thingyParse(header);
		}
		
		// Add the title if requested in the filter attributes
		if(title === "_$NO TITLE$_"){
			// No title - do nothing
		}else if(title === ""){
			tt += "<h1>"+row[i].id+"</h1>";
		}else{
			tt += "<h1>"+title+"</h1>";
		}
		
		
		tt += thingyParse(row[i].id, model, altel, linked);
		
		// Add footer from the hash attributes
		if(footer){
			tt += thingyParse(footer);
		}
		
		// Include thingy footer
		if(level === 1 && section === "tjs-filterresults" && nothingyfooter === false){
			if(thingyMode === "editmode"){
				var r = thingyClosureFilter(thingyData, "el.thingyFooter===true", ["desc", "sort"]);
			}else{
				var r = thingyClosureFilter(thingyData, "el.thingyFooter===true && el.editModeOnly !== true", ["desc", "sort"]);
			}
			for(var n = 0; n < r.length; n++){
				tt += thingyParse(r[n].id,null,null,null,{"_parentid":row[i].id});
			}
		}
	}
	
	if(!append){
		thingyClearScreen();
	}
	
	return tt;
}

function thingyHashChange(hash, include,level, section){
	// include is either true or false indicating whether or not this is an include or not.
	var res = "";

	hash = hash.split("#");
	for(var i = 0; i < hash.length; i++){
		
		var attrs = hash[i].split("/");
		
		var filter = attrs[0];
		attrs.shift();
		
		res += thingyParseObject(filter, attrs, include, level, section);
	}
	
	return res;
	
}


function thingyUpdateScreen(hash,section,level){
	
	if(!hash){
		if(thingyMode === "editmode"){
			hash = "#el.homepage === true/desc sort";
		}else{
			hash = "#el.homepage === true && el.editModeOnly !== true/desc sort";
		}
	}
	
	if(!section){var section = "tjs-filterresults";}
	
	thingyModeCheck();
	
	if(hash.substr(0, 11) === "_systemSave"){
		// For now this has to be hard coded because I am getting infinite loop when cloning the code when in a thingy
		thingySave();
	}else{
		var thingy = thingyHashChange(hash,null,level, section);
		
		if(thingy){
			
			$("#"+section).append(thingy);
			
		}
	}
}

thingyClearScreen = function(){
	$("#tjs-filterresults").html("");
}

function thingyWrite(e){
	return e;	
}


/////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////// EDITING, DELETING AND SAVING ///////////////////////////////////

thingyDelete = function(id){
	for(var i = 0; i<thingyData.length; i++){
		if(thingyData[i].id === id){
			thingyData.splice(i,1);
			break;
		}
	}
}

thingyDrawEdit = function(model){
	
	if(typeof model === 'object'){
		// Good. Do nothing
	}else if(typeof model === 'string'){
		// Assume this is the id, so populate the model
		for(var i = 0; i < thingyData.length; i++){
			if(model === thingyData[i].id){
				model = thingyData[i];
				break;
			}
		}
	}else{
		// Assume this is meant to be a new thingy
		model = "";
	}
	
	if(!model){
		var pageTitle = "New Thingy";
		model = {};
		model.id = "";
		model.about = "";
		model.created = "";
		model.thingy="";
		model.parent="";
		model.active=true;
		model.format="thingy";
		model.dataSource="";
		model.ignoreIncludes=false;
		model.sort=0;
		model.tags=[];
		model.fields="{}";
		
		model.homepage = false;
		model.systemHeader = false;
		model.thingyHeader = false;
		model.editModeOnly = false;
		model.systemFooter = false;
		model.thingyFooter = false;
		
	}else{
		var pageTitle = "Edit Thingy";
	}
	
	
	// the model needs to be a clone because we are converting parts from the object to a string (tags, fields). 
	// Otherwise this will affect the original thingyData object.
	var model = jQuery.extend(true, {}, model);
	model.tags = JSON.stringify(model.tags);
	//model.fields = "{"+JSON.stringify(model.fields)+"}";
	model.fields = JSON.stringify(model.fields);
	
	var htm = "";
	
	//alert(model.homepage);
	
	
	
	
	
	
	
	htm+= "<h1>"+pageTitle+"</h1>";
	htm+= "<div class='pure-form pure-form-aligned'>";
    htm+= "<fieldset>";
	
	htm+= "<div class='pure-g'>";
	htm+= "<div class='pure-u-1-2'>";
	
	
	//htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editid'>ID:</label> <input type='text' value='{{id}}' id='editid' placeholder='ID' style='width:90%'>";
	//htm+= "</div>";
	//htm+= "<div class='pure-control-group'>";
		htm+= "<br><br><label for='editthingy'>Thingy:</label><br><textarea id='editthingy' style='width:100%; height:300px' placeholder='Thingy'>{{thingy}}</textarea>";
	//htm+= "</div>";
	//htm+= "<div class='pure-controls'>";
	htm+= "<br><br><button class='thingybutton pure-button pure-button-primary' data-thingy='save {{id}}'>Save</button>";
	//htm+= "</div>";
	htm+= "</div>";
	
	htm+= "<div class='pure-u-1-2'>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editabout'>About:</label> <input type='text' value='{{about}}' id='editabout' placeholder='About'>";
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editparent'>Parent:</label> <input type='text' value='{{parent}}' id='editparent' placeholder='Parent'>";
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editcreated'>Created:</label> <input type='datetime-local' value='{{created}}' name='editcreated' id='editcreated' >"
	htm+= "</div>";
	
	htm+= "<div class='pure-control-group'>";
		if(model.active === true || model.active === "true"){
			htm+= "<label for='editactive'>Active:</label> <select id='editactive'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editactive'>Active:</label> <select id='editactive'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	
	if(model.format==="none"){var none = "selected"}else{var none = ""}
	if(model.format==="thingy" || model.format===""){var thingy = "selected"}else{var thingy = ""}
	if(model.format==="html"){var html = "selected"}else{var html = ""}
	if(model.format==="markdown"){var markdown = "selected"}else{var markdown = ""}
	if(model.format==="handlebars"){var handlebars = "selected"}else{var handlebars = ""}
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editformat'>Format:</label> <select id='editformat'><option value='thingy' "+thingy+">thingy</option><option value='html' "+html+">html</option><option value='markdown' "+markdown+">markdown</option><option value='handlebars' "+handlebars+">handlebars</option><option value='none' "+none+">none</option></select>";
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editdatasource'>Data Source:</label> <input type='text' value='{{dataSource}}' id='editdatasource'>";
	htm+= "</div>";
	
	htm+= "<div class='pure-control-group'>";
		if(model.ignoreIncludes === true || model.ignoreIncludes === "true"){
			htm+= "<label for='editignoreincludes'>Ignore Includes:</label> <select id='editignoreincludes'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editignoreincludes'>Ignore Includes:</label> <select id='editignoreincludes'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editsort'>Sort:</label> <input type='number' id='editsort' value='{{sort}}'> <br>";
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='edittags'>tags:</label> <input type='text' value='{{tags}}' id='edittags'> []<br>";
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		htm+= "<label for='editfields'>fields:</label> <input type='text' value='{{fields}}' id='editfields'> {}";
	htm+= "</div>";
	
	htm+= "<div class='pure-control-group'>";
		//alert(model.homepage);
		if(model.homepage === true || model.homepage === "true"){
			htm+= "<label for='edithomepage'>On Homepage:</label> <select id='edithomepage'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='edithomepage'>On Homepage:</label> <select id='edithomepage'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		if(model.systemHeader === true || model.systemHeader === "true"){
			htm+= "<label for='editsystemheader'>System Header:</label> <select id='editsystemheader'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editsystemheader'>System Header:</label> <select id='editsystemheader'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		if(model.thingyHeader === true || model.thingyHeader === "true"){
			htm+= "<label for='editthingyheader'>Thingy Header:</label> <select id='editthingyheader'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editthingyheader'>Thingy Header:</label> <select id='editthingyheader'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		if(model.systemFooter === true || model.systemFooter === "true"){
			htm+= "<label for='editsystemfooter'>System Footer:</label> <select id='editsystemfooter'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editsystemfooter'>System Footer:</label> <select id='editsystemfooter'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		if(model.thingyFooter === true || model.thingyFooter === "true"){
			htm+= "<label for='editthingyfooter'>Thingy Footer:</label> <select id='editthingyfooter'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editthingyfooter'>Thingy Footer:</label> <select id='editthingyfooter'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	htm+= "<div class='pure-control-group'>";
		if(model.editModeOnly === true || model.editModeOnly === "true"){
			htm+= "<label for='editeditmodeonly'>Edit Mode Only:</label> <select id='editeditmodeonly'><option value=true selected>true</option><option value=false>false</option></select>";
		}else{
			htm+= "<label for='editeditmodeonly'>Edit Mode Only:</label> <select id='editeditmodeonly'><option value=true >true</option><option value=false selected>false</option></select>";
		}
	htm+= "</div>";
	
	
	
	
	htm+= "</div>";
	htm+= "</div>";
	
	htm+= "</fieldset>";
	htm+= "</div>";
	
	
	
	var template = Handlebars.compile(htm);
	var thingy = template(model);
	//$("#tjs-filterresults").append(thingy);
	return thingy;
}




function thingySave(){
	
	var okToGo = true;
	
	var saveit1 = $("#tjs-pageheader").html();
	var saveit2 = $("#tjs-filterresults").html();
	var saveit3 = $("#tjs-pagefooter").html();
	
	if(thingyUsePassword){
		//alert("Use Password");
		if(!thingyEncrypt()){
			return;
		}
		$("#thingydata").text("\nvar thingyData = \"" + thingyData + "\";\n");
	}else{
		$("#thingydata").text("\nvar thingyData = \n" + JSON.stringify(thingyData, null, '\t') + ";\n");
	}
	
	
	
	
	
	$("#tjs-pageheader").html("");
	$("#tjs-filterresults").html("");
	$("#tjs-pagefooter").html("");
	
	var html = $('html').clone();
	
	var htmlString = html.html();
	htmlString = '<!DOCTYPE html>\n<html lang="en">\n' + htmlString + '\n</html>';

	var blob = new Blob([htmlString], {type: "text/plain;charset=utf-8"});
	saveAs(blob, "thingynotes.htm");
	
	$("#tjs-pageheader").html(saveit1);
	$("#tjs-filterresults").html(saveit2);
	$("#tjs-pagefooter").html(saveit3);
	
	// Unbind the beforeunload binding warning
	$(window).unbind('beforeunload', saveBeforeUnloadHandler);
	
}

function log(txt){
	console.log(txt);
}

/////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////
//////////////////////// UPDATE SCREEN SECTION //////////////////////////////////////////


// Check for mode setting
function thingyModeCheck(){
	if(window.location.hash.search("/editmode") > -1 && thingyMode !== "editmode"){
		thingyMode = "editmode";
		window.location.hash = window.location.hash.replace("/editmode","");
	}
	if(window.location.hash.search("/blankmode") > -1 && thingyMode !== "blankmode"){
		thingyMode = "blankmode";
		window.location.hash = window.location.hash.replace("/blankmode","");
	};
	
};

// Write the system headers
function thingyWriteAllSystemHeaders(){
	// Clear the section
	$("#tjs-pageheader").html("");
	
	if(thingyMode === "editmode"){
		var r = thingyClosureFilter(thingyData, "el.systemHeader===true && el.active===true", ["desc", "sort"]);
	}else{
		var r = thingyClosureFilter(thingyData, "el.systemHeader===true && el.editModeOnly !== true && el.active===true", ["desc", "sort"]);
	}
	for(var i = 0; i < r.length; i++){
		thingyUpdateScreen(r[i].id, "tjs-pageheader")
	}
	//alert(thingyMode);
};



// Write the system footers
function thingyWriteAllSystemFooter(){
	// Clear the css section
	$("#tjs-pagefooter").html("");
	
	if(thingyMode === "editmode"){
		var r = thingyClosureFilter(thingyData, "el.systemFooter===true && el.active===true", ["desc", "sort"]);
	}else{
		var r = thingyClosureFilter(thingyData, "el.systemFooter===true && el.editModeOnly !== true && el.active===true", ["desc", "sort"]);
	}
	for(var i = 0; i < r.length; i++){
		thingyUpdateScreen(r[i].id, "tjs-pagefooter")
	}
	
};





////////////////////////////////////////////////////////////////////////////////////////////


var saveBeforeUnloadHandler = function() {
	if(thingyParse("_beforeUnloadWarning")){
		return thingyParse("_beforeUnloadWarning")
	}else{
		return 'You have unsaved thingies. Are you sure you want to leave?';
	}
};

function thingyEncrypt(){
	
	if(!thingyPassword){
		var pass1 = "#2%@9&%$80";
		var pass2 = "#2%@9&%$80";
		while(pass1 === "#2%@9&%$80" || pass2 === "#2%@9&%$80" || pass1 !== pass2){
			
			while(pass1 === "#2%@9&%$80" || pass1 === ""){
				var pass1 = prompt("Password", "");
				if(!pass1){ alert("Data not saved."); return false;}
			}
			
			while(pass2 === "#2%@9&%$80" || pass2 === ""){
				var pass2 = prompt("Password again", "");
				if(!pass2){ alert("Data not saved."); return false;}
			}
			
			if(pass1 === pass2){
				thingyPassword = pass1;
				break;
			}else{
				alert("Passwords do not match. Try again.");
				pass1 = "#2%@9&%$80";
				pass2 = "#2%@9&%$80";
			}
			
		}
	}
	
	if(!thingyPassword){
		alert("Data not saved.");
		return false;
	}else{
		thingyData = Aes.Ctr.encrypt(JSON.stringify(thingyData, null, '\t'), thingyPassword, 256);
		return true;
	}
	
}

function thingyDecrypt(){
		
	while(thingyData.search(":") === -1){
		thingyPassword = prompt("Encryption Password", "");
		var decoded = Aes.Ctr.decrypt(thingyData, thingyPassword, 256);
		if(decoded.search(":") > -1 && decoded.search("id") > -1 && decoded.search("thingy") > -1 && decoded.search("format") > -1 ){
			thingyData = eval(decoded);
			break;
		}
	}

	return;	
}



// Test to see if thingyData is encrypted
if(JSON.stringify(thingyData).search(":") === -1){
	// thingyData is encrypted. It needs to be decrypted.
	thingyDecrypt();
}

/////////////////////////////////////////////// SETTINGS //////////////////////////////////////

// Get the settings. If not set them using defaults.
thingyMode = "editmode";
thingyUsePassword = false;
thingyPassword = "";

// Use the "_thingyjsSettings" thingy and in the thingy data put 'key':'val','key':'val'
var thingyjsSettings = thingyParse("_thingyjsSettings");
if(thingyjsSettings){
	thingyjsSettings = eval("[{"+thingyjsSettings+"}]"); 
	thingyjsSettings = thingyjsSettings[0];
	if(thingyjsSettings.hasOwnProperty('thingyMode')){
		thingyMode = thingyjsSettings.thingyMode;
	}
	if(thingyjsSettings.hasOwnProperty('thingyUsePassword')){
		thingyUsePassword = thingyjsSettings.thingyUsePassword;
	}
}






thingyModeCheck();
thingyWriteAllSystemHeaders();
thingyWriteAllSystemFooter();
thingyUpdateScreen(window.location.hash.substring(1),null,1);

$(window).on('hashchange',function(){
	//thingyWriteAllCssThingies();
	thingyUpdateScreen(window.location.hash.substring(1),null,1);
});

})();
</script>

</body>
</html>